/*!
 * Web Experience Toolkit (WET) / Boîte à  outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v5.1.0-development - 2019-03-22
 * - gcweb-menu changed for gcweb-v2
 * - fix - Menu screen reader compatibility issue 
 * - 2019-02-27 - Initial commit - Chat wizard
 * - 2019-02-28 - Binding wb5 table with URL mapping plugin
 * - 2019-03-09 - Added gcweb-menu to remove gcweb-v2 codename
 * - 2019-03-16 - Added Geomap filter in the action manager
 * - 2019-03-22 - Added Chat wizard and steps form plugins
 * - 2019-04-11 - Minor updates to the Chat wizard
 * - 2019-05-07 - Hotfix GCWeb menu V2
 * - 2019-05-14 - GCWeb responsive header and Experimental
 * - 2019-06-11 - GCWeb menu instructions
 * - 2019-06-26 - MT add pre-filtering support
 * - 2019-06-26 - CC allowed to enable smart data-table search
 *
 */
!function(u, l) {
  "use strict";
  function p(e, t, a) {
      var r,
          n,
          i;
      for (r = a[t]; n = r.shift();)
          (i = n.action) && (e.trigger(i + "." + h, n), delete n.action)
  }
  var e = l.doc,
      f = "wb-actionmng",
      d = "." + f,
      t = "[data-" + f + "]",
      c = f + "Rn",
      h = f + d,
      b = {},
      g = {},
      m = {},
      a = ["mapfilter", "patch", "ajax", "addClass", "removeClass", "tblfilter", "run"].join("." + h + " ") + "." + h,
      v = function(e, t, a) {
          t[e] || (t[e] = []), t[e].push(a)
      };
  e.on("do." + h, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l = e.element || e.target,
          d = l.id,
          c = e.actions || [];
      if ((l === e.target || e.currentTarget === e.target) && -1 === l.className.indexOf(f)) {
          for (u.isArray(c) || (c = [c]), (r = c.length) && (t = u(l)).addClass(f), d && b[d] && p(t, d, b), a = 0; a !== r; a += 1)
              (i = (n = c[a]).action) && ((o = n.target) ? (n.trgbefore ? v(o, b, n) : v(o, g, n), (s = n.trggroup) && v(s, m, n)) : t.trigger(i + "." + h, n));
          d && g[d] && p(t, d, g), u(e.target).removeClass(f)
      }
  }), e.on("clean." + h, function(e) {
      var t,
          a,
          r = e.element || e.target,
          n = e.trggroup;
      if ((r === e.target || e.currentTarget === e.target) && n && m[n])
          for (t = m[n]; a = t.shift();)
              delete a.action
  }), e.on(a, d, function(e, t) {
      var a = e.type;
      if (h === e.namespace)
          switch (a) {
          case "run":
              !function(e, t) {
                  var a,
                      r,
                      n,
                      i,
                      o = e.target,
                      s = u(o),
                      l = m[t.trggroup];
                  if (l && !s.hasClass(c)) {
                      for (s.addClass(c), r = l.length, a = 0; a !== r; a += 1)
                          (i = (n = l[a]).action) && s.trigger(i + "." + h, n);
                      s.removeClass(c)
                  }
              }(e, t);
              break;
          case "tblfilter":
              !function(e, t) {
                  var a = e.target,
                      r = u(t.source || a),
                      n = t.column,
                      i = parseInt(n, 10),
                      o = !!t.regex,
                      s = !t.smart || !!t.smart,
                      l = !t.caseinsen || !!t.caseinsen;
                  if ("TABLE" !== r.get(0).nodeName)
                      throw "Table filtering can only applied on table";
                  n = !0 === i ? i : n, r.dataTable({
                      retrieve: !0
                  }).api().column(n).search(t.value, o, s, l).draw()
              }(e, t);
              break;
          case "addClass":
              !function(e, t) {
                  var a = u(t.source || e.target);
                  t.class && a.addClass(t.class)
              }(e, t);
              break;
          case "removeClass":
              !function(e, t) {
                  var a = u(t.source || e.target);
                  t.class && a.removeClass(t.class)
              }(e, t);
              break;
          case "ajax":
              !function(e, t) {
                  var a,
                      r,
                      n;
                  t.container ? a = u(t.container) : (r = l.getId(), a = u("<div id='" + r + "'></div>"), u(e.target).after(a)), t.trigger && a.attr("data-trigger-wet", "true"), n = t.type ? t.type : "replace", a.attr("data-ajax-" + n, t.url), a.one("wb-contentupdated", function(e, t) {
                      var a = e.currentTarget,
                          r = a.getAttribute("data-trigger-wet");
                      a.removeAttribute("data-ajax-" + t["ajax-type"]), r && (u(a).find(l.allSelectors).addClass("wb-init").filter(":not(#" + a.id + " .wb-init .wb-init)").trigger("timerpoke.wb"), a.removeAttribute("data-trigger-wet"))
                  }), a.trigger("wb-update.wb-data-ajax")
              }(e, t);
              break;
          case "patch":
              !function(e, t) {
                  var a = t.source,
                      r = t.patches,
                      n = !!t.cumulative;
                  r && (u.isArray(r) || (r = [r]), u(a).trigger({
                      type: "patches.wb-jsonmanager",
                      patches: r,
                      fpath: t.fpath,
                      filter: t.filter || [],
                      filternot: t.filternot || [],
                      cumulative: n
                  }))
              }(0, t);
              break;
          case "mapfilter":
              !function(e, t) {
                  var a = u(t.source || e.target).get(0).geomap,
                      r = t.filter,
                      n = t.value;
                  "aoi" === r && a.zoomAOI(n), "layer" === r && a.showLayer(n, !0)
              }(e, t)
          }
  }), e.on("timerpoke.wb wb-init.wb-actionmng", t, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s = l.init(e, f, d);
      if (s) {
          if (t = u(s), a = l.getData(t, f))
              for (u.isArray(a) || (a = [a]), n = a.length, r = 0; r !== n; r += 1)
                  (o = (i = a[r]).trggroup) && i.action && v(o, m, i);
          l.ready(t, f)
      }
  }), l.add(t)
}(jQuery, wb), function(a, r) {
  "use strict";
  var e = r.doc,
      n = "wb-bgimg",
      i = "[data-bgimg]";
  e.on("timerpoke.wb wb-init." + n, i, function(e) {
      var t = r.init(e, n, i);
      t && (t.style.backgroundImage = "url(" + t.dataset.bgimg + ")", r.ready(a(t), n))
  }), r.add(i)
}(jQuery, wb), function(j, d, C) {
  "use strict";
  var e,
      p = "wb-data-json",
      u = "wb-json",
      t = ["[data-json-after]", "[data-json-append]", "[data-json-before]", "[data-json-prepend]", "[data-json-replace]", "[data-json-replacewith]", "[data-" + u + "]"],
      f = ["after", "append", "before", "prepend", "val"],
      h = /(href|src|data-*|pattern|min|max|step|low|high)/,
      b = /(checked|selected|disabled|required|readonly|multiple|hidden)/,
      a = t.length,
      g = t.join(","),
      m = p + "-queue",
      r = C.doc,
      v = function(e, t, a, r, n) {
          var i,
              o = j(e),
              s = {
                  url: t,
                  refId: a,
                  nocache: r,
                  nocachekey: n
              },
              l = d[p];
          !l || "http" !== t.substr(0, 4) && "//" !== t.substr(0, 2) || (i = C.getUrlParts(t), C.pageUrlParts.protocol === i.protocol && C.pageUrlParts.host === i.host || Modernizr.cors && !l.forceCorsFallback || "function" == typeof l.corsFallback && (s.dataType = "jsonp", s.jsonp = "callback", s = l.corsFallback(s))), o.trigger({
              type: "json-fetch.wb",
              fetch: s
          })
      },
      E = function(e, t, a) {
          var r,
              n,
              i,
              o,
              s,
              l,
              d,
              c,
              u,
              p,
              f,
              h,
              b,
              g = t.mapping || [{}],
              m = t.filter || [],
              v = t.filternot || [],
              w = t.queryall,
              y = t.tobeclone,
              x = e.className,
              k = e,
              A = t.source ? document.querySelector(t.source) : e.querySelector("template");
          if (j.isArray(a) || (a = "object" != typeof a ? [a] : j.map(a, function(e, t) {
              return "object" != typeof e || j.isArray(e) ? e = {
                  "@id": t,
                  "@value": e
              } : e["@id"] || (e["@id"] = t), [e]
          })), i = a.length, j.isArray(g) || (g = [g]), r = g.length, "TABLE" === e.tagName && g && -1 !== x.indexOf("wb-tables-inited") && "string" == typeof g[0]) {
              for (b = j(e).dataTable({
                  retrieve: !0
              }).api(), n = 0; n < i; n += 1)
                  if (o = a[n], S(o, m, v)) {
                      for (c = "/" + n, h = [], s = 0; s < r; s += 1)
                          h.push(jsonpointer.get(a, c + g[s]));
                      b.row.add(h)
                  }
              b.draw()
          } else if (A)
              for (A.content || C.tmplPolyfill(A), t.appendto && (k = j(t.appendto).get(0)), n = 0; n < i; n += 1)
                  if (o = a[n], S(o, m, v)) {
                      for (c = "/" + n, u = y ? A.content.querySelector(y).cloneNode(!0) : A.content.cloneNode(!0), w && (p = u.querySelectorAll(w)), s = 0; s < r || 0 === s; s += 1)
                          l = g[s], f = p ? p[s] : l.selector ? u.querySelector(l.selector) : u, (d = l.attr) && (f.hasAttribute(d) || f.setAttribute(d, ""), f = f.getAttributeNode(d)), h = "string" == typeof o ? o : "string" == typeof l ? jsonpointer.get(a, c + l) : jsonpointer.get(a, c + l.value), l.placeholder && (h = (f.textContent || "").replace(l.placeholder, h)), j.isArray(h) ? E(f, l, h) : l.isHTML ? f.innerHTML = h : f.textContent = h;
                      k.appendChild(u)
                  }
      },
      S = function(e, t, a) {
          var r,
              n,
              i,
              o = t.length,
              s = a.length,
              l = !1;
          if (o || s) {
              for (r = 0; r < o; r += 1)
                  if (n = t[r], i = c(jsonpointer.get(e, n.path), n.value), n.optional)
                      l = l || i;
                  else {
                      if (!i)
                          return !1;
                      l = !0
                  }
              if (o && !l)
                  return !1;
              for (r = 0; r < s; r += 1)
                  if (n = a[r], (i = c(jsonpointer.get(e, n.path), n.value)) && !n.optional || i && n.optional)
                      return !1
          }
          return !0
      },
      c = function(e, t) {
          switch (typeof e) {
          case "undefined":
              return !1;
          case "boolean":
          case "string":
          case "number":
              return e === t;
          case "object":
              if (null === e)
                  return null === t;
              if (j.isArray(e)) {
                  if (j.isArray(t) || e.length !== t.length)
                      return !1;
                  for (var a = 0, r = e.length; a < r; a++)
                      if (!c(e[a], t[a]))
                          return !1;
                  return !0
              }
              var n = i(t).length;
              if (i(e).length !== n)
                  return !1;
              for (a = 0; a < n; a++)
                  if (!c(e[a], t[a]))
                      return !1;
              return !0;
          default:
              return !1
          }
      },
      i = function(e) {
          if (j.isArray(e)) {
              for (var t = new Array(e.length), a = 0; a < t.length; a++)
                  t[a] = "" + a;
              return t
          }
          if (Object.keys)
              return Object.keys(e);
          t = [];
          for (var r in e)
              e.hasOwnProperty(r) && t.push(r);
          return t
      };
  r.on("json-failed.wb", g, function() {
      throw "Bad JSON Fetched from url in " + p
  }), Modernizr.load({
      test: "content" in document.createElement("template"),
      nope: "site!deps/template" + C.getMode() + ".js"
  }), r.on("timerpoke.wb wb-init.wb-data-json wb-update.wb-data-json json-fetched.wb", g, function(e) {
      if (e.currentTarget === e.target)
          switch (e.type) {
          case "timerpoke":
          case "wb-init":
              !function(e) {
                  var t,
                      a = C.init(e, p, g);
                  if (a) {
                      var r,
                          n,
                          i,
                          o,
                          s,
                          l = ["before", "replace", "replacewith", "after", "append", "prepend"],
                          d = l.length,
                          c = [];
                      for (t = j(a), i = 0; i !== d; i += 1)
                          r = l[i], null !== (s = a.getAttribute("data-json-" + r)) && c.push({
                              type: r,
                              url: s
                          });
                      if (C.ready(t, p), (n = C.getData(t, u)) && n.url)
                          c.push(n);
                      else if (n && j.isArray(n))
                          for (d = n.length, i = 0; i !== d; i += 1)
                              c.push(n[i]);
                      for (t.data(m, c), d = c.length, i = 0; i !== d; i += 1)
                          o = c[i], v(a, o.url, i, o.nocache, o.nocachekey)
                  }
              }(e);
              break;
          case "wb-update":
              !function(e) {
                  var t = e.target,
                      a = j(t),
                      r = a.data(m),
                      n = r.length,
                      i = e["wb-json"];
                  if (!i.url || !i.type && !i.source)
                      throw "Data JSON update not configured properly";
                  r.push(i), a.data(m, r), v(t, i.url, n)
              }(e);
              break;
          default:
              !function(e) {
                  var t,
                      a = e.target,
                      r = j(a),
                      n = r.data(m),
                      i = e.fetch,
                      o = n[i.refId],
                      s = o.type,
                      l = o.prop || o.attr,
                      d = o.showempty,
                      c = i.response,
                      u = typeof c;
                  if (d || "undefined" != u) {
                      if (d && "undefined" == u && (c = ""), t = jQuery.ajaxSettings.cache, jQuery.ajaxSettings.cache = !0, s)
                          if ("replace" === s)
                              r.html(c);
                          else if ("replacewith" === s)
                              r.replaceWith(c);
                          else if ("addclass" === s)
                              r.addClass(c);
                          else if ("removeclass" === s)
                              r.removeClass(c);
                          else if ("prop" === s && l && b.test(l))
                              r.prop(l, c);
                          else if ("attr" === s && l && h.test(l))
                              r.attr(l, c);
                          else {
                              if ("function" != typeof r[s] || -1 === f.indexOf(s))
                                  throw p + " do not support type: " + s;
                              r[s](c)
                          }
                      else
                          s = "template", E(a, o, c), o.trigger && r.find(C.allSelectors).addClass("wb-init").filter(":not(#" + a.id + " .wb-init .wb-init)").trigger("timerpoke.wb");
                      jQuery.ajaxSettings.cache = t, r.trigger("wb-contentupdated", {
                          "json-type": s,
                          content: c
                      })
                  }
              }(e)
          }
      return !0
  });
  for (e = 0; e !== a; e += 1)
      C.add(t[e])
}(jQuery, window, wb), function(a, n, r) {
  "use strict";
  function i(e) {
      if (!e.content) {
          var t,
              a,
              r = e;
          for (t = r.childNodes, a = n.createDocumentFragment(); t[0];)
              a.appendChild(t[0]);
          r.content = a
      }
  }
  var o = "wb-template",
      s = "template",
      e = r.doc;
  r.tmplPolyfill = i, e.on("timerpoke.wb wb-init.wb-template", s, function(e) {
      var t = r.init(e, o, s);
      t && (i(t), r.ready(a(t), o))
  }), r.add(s)
}(jQuery, document, wb), function(r, e, n) {
  "use strict";
  var i = "wb-doaction",
      o = "a[data-" + i + "],button[data-" + i + "]",
      s = "do.wb-actionmng",
      l = n.doc;
  l.on("click", o, function(e) {
      var t = e.target,
          a = r(t);
      if (e.currentTarget !== e.target && (t = (a = a.parentsUntil("main", o))[0]), "BUTTON" === t.nodeName || "A" === t.nodeName)
          return n.isReady ? a.trigger({
              type: s,
              actions: n.getData(a, i)
          }) : l.one("wb-ready.wb", function() {
              a.trigger({
                  type: s,
                  actions: n.getData(a, i)
              })
          }), !1
  })
}(jQuery, window, wb), function(q, T, N) {
  "use strict";
  function r(e, t) {
      var a = t.$selElm,
          r = t.name,
          n = t.value;
      r && t.provEvt.setAttribute("name", r), n && a.val(n), a.attr("data-" + o, o)
  }
  function n(e, t) {
      var a = q(t.origin),
          r = q(e.target).data($),
          n = t.toggle;
      n && "string" == typeof n && (n = {
          selector: n
      }), n = q.extend({}, n, r.toggle), a.addClass("wb-toggle"), a.trigger("toggle.wb-toggle", n), n.type = "off", a.one(P, function() {
          a.addClass("wb-toggle"), a.trigger("toggle.wb-toggle", n), a.removeClass("wb-toggle")
      })
  }
  function i(e, t) {
      var a,
          r,
          n,
          i,
          o,
          s,
          l,
          d,
          c = t.outputctnrid,
          u = t.actions,
          p = t.lblselector,
          f = !!t.required,
          h = !t.noreqlabel,
          b = t.items,
          g = e.target,
          m = q(g),
          v = t.source,
          w = m.data($).i18n,
          y = t.attributes,
          x = N.getId(),
          k = "<legend class='h5 ",
          A = "</span>",
          j = "<fieldset id='" + x + "' data-" + W + "='" + g.id + "' " + G + "='" + v.id + "' class='" + D + " mrgn-bttm-md'",
          C = "",
          E = t.typeRadCheck,
          S = t.inline,
          I = O + x;
      if (y && "object" == typeof y)
          for (i in y)
              y.hasOwnProperty(i) && (j += " " + i + "='" + y[i] + "'");
      for (a = q(j + "></fieldset>"), f && h && (k += " required", A += " <strong class='required'>(" + w.required + ")</strong>"), k += "'>", A += "</legend>", p ? (r = q("<div>" + t.label + "</div>").find(p), a.append(k + r.html() + A).append(r.nextAll()), n = r.prevAll()) : a.append(q(k + t.label + A)), i = 0, o = b.length; i !== o; i += 1)
          if ((d = b[i]).group)
              for (C += "<p>" + d.label + "</p>", l = d.group.length, s = 0; s !== l; s += 1)
                  C += X(d.group[s], I, E, S, f);
          else
              C += X(d, I, E, S, f);
      a.append(C), q("#" + c).append(a), n && a.before(n), u && 0 < u.length && a.data(V, u), Y(m, H, x)
  }
  var z = "wb-fieldflow",
      u = "." + z,
      p = z + "-form",
      v = z + "-sub",
      D = z + "-init",
      e = "." + D,
      O = z + N.getId(),
      L = "[name^=" + O + "]",
      w = z + "-label",
      b = z + "-header",
      t = "." + p,
      a = "wb-init" + u,
      M = "draw" + u,
      B = "action" + u,
      U = "submit" + u,
      R = "submited" + u,
      f = "ready" + u,
      P = "clean" + u,
      F = "reset" + u,
      Q = "createctrl" + u,
      H = z + "-register",
      J = z + "-hdnfld",
      $ = z + "-config",
      V = z + "-push",
      _ = z + "-submit",
      K = z + "-action",
      W = z + "-origin",
      G = "data-" + z + "-source",
      o = z + "-flagoptvalue",
      s = N.doc,
      h = {
          toggle: {
              stateOn: "visible",
              stateOff: "hidden"
          },
          i18n: {
              en: {
                  btn: "Continue",
                  defaultsel: "Make your selection...",
                  required: "required"
              },
              fr: {
                  btn: "Allez",
                  defaultsel: "Sélectionnez dans la liste...",
                  required: "obligatoire"
              }
          },
          action: "ajax",
          prop: "url"
      },
      l = [["redir", "query", "ajax", "addClass", "removeClass", "removeClass", "append", "tblfilter", "toggle"].join("." + B + " ") + "." + B, ["ajax", "toggle", "redir", "addClass", "removeClass"].join("." + U + " ") + "." + U, ["tblfilter", z].join("." + M + " ") + "." + M, ["select", "checkbox", "radio"].join("." + Q + " ") + "." + Q].join(" "),
      Y = function(e, t, a, r) {
          var n = e.data(t);
          return n && !r || (n = []), n.push(a), e.data(t, n)
      },
      y = function(e, t) {
          var a,
              r,
              n,
              i,
              o,
              s,
              l,
              d,
              c,
              u,
              p,
              f,
              h,
              b = e.get(),
              g = b.length,
              m = [];
          for (a = 0; a !== g; a += 1) {
              if (o = null, n = i = "", c = (r = b[a]).firstChild, l = (d = r.childNodes).length, !c)
                  throw "You have a markup error, There may be an empyt <li> elements in your list.";
              for (h = [], "A" === c.nodeName && (i = c.getAttribute("href"), n = q(c).html(), l = 1, h.push({
                  action: "redir",
                  url: i
              })), s = 1; s !== l; s += 1) {
                  if (u = d[s], (p = q(u)).hasClass(v)) {
                      f = u.id || N.getId(), u.id = f, i = z + "-" + f, h.push({
                          action: "append",
                          srctype: z,
                          source: "#" + f
                      });
                      break
                  }
                  if ("UL" === u.nodeName) {
                      if (t)
                          throw "Recursive error, please check your code";
                      o = y(p.children(), !0)
                  }
                  p.hasClass(w) && (n = p.html())
              }
              n || (n = c.nodeValue), r.id || (r.id = N.getId()), m.push({
                  bind: r.id,
                  label: n,
                  actions: h,
                  group: o
              })
          }
          return m
      },
      S = function(e) {
          var t = e.label,
              a = "<option value='" + t + "'";
          return a += d(e), a += ">" + t + "</option>"
      },
      d = function(e) {
          var t = "",
              a = {};
          return a.bind = e.bind || "", a.actions = e.actions || [], t += " data-" + z + "='" + JSON.stringify(a) + "'"
      },
      X = function(e, t, a, r, n) {
          var i = e.label,
              o = N.getId(),
              s = " for='" + o + "'><input id='" + o + "' type='" + a + "' name='" + t + "' value='" + i + "'";
          return s = r ? "<label class='" + a + (r ? "-inline" : "") + "'" + s : "<div class='" + a + "'><label" + s, s += d(e), n && (s += " required='required'"), s += " /> " + i + "</label>", r || (s += "</div>"), s
      };
  s.on(F, u + ", ." + v, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l = e.target,
          d = [];
      if (l === e.currentTarget && (a = (t = q(l)).data($)) && a.reset)
          for (r = a.reset, q.isArray(r) ? d = r : d.push(r), i = d.length, n = 0; n !== i; n += 1)
              (s = (o = d[n]).action) && (!1 !== o.live && (o.live = !0), t.trigger(s + "." + B, o))
  }), s.on("change", t + " " + e, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l,
          d = e.currentTarget,
          c = q(d),
          u = c.nextAll(),
          p = q("#" + d.getAttribute("data-" + W)),
          f = q("#" + d.getAttribute(G)),
          h = p.data(H),
          b = c.find(":checked", c),
          g = c.get(0).form;
      if (n = u.length) {
          for (r = n; 0 !== r; r -= 1)
              (s = u[r]) && (-1 < (l = h.indexOf(s.id)) && h.splice(l, 1), q("#" + s.getAttribute(G)).trigger(F).trigger(P), q(s).trigger(P));
          p.data(H, h), u.remove()
      }
      f.trigger(F).trigger(P), c.trigger(P), c.data(_, []);
      var m,
          v,
          w,
          y,
          x,
          k,
          A,
          j,
          C,
          E = [],
          S = [],
          I = [];
      for (m = p.data($), (v = f.data($)) && m && (m = q.extend({}, m, v)), b.length && b.val() && m && m.default && (a = m.default, q.isArray(a) ? E = a : E.push(a)), x = m.action, k = m.prop, K = m.actionData || {}, (a = c.data(V)) && (E = E.concat(a)), r = 0, n = b.length; r !== n; r += 1)
          if (t = b.get(r), (w = N.getData(t, z)) && (C = w.bind, E = E.concat(w.actions), C && (y = T.getElementById(C).getAttribute("data-" + z)))) {
              if (y.startsWith("{") || y.startsWith("[")) {
                  try {
                      a = JSON.parse(y)
                  } catch (e) {
                      q.error("Bad JSON object " + y)
                  }
                  q.isArray(a) || (a = [a])
              } else
                  (a = {}).action = x, a[k] = y, a = [a = q.extend(!0, {}, K, a)];
              E = E.concat(a)
          }
      if (!E.length)
          return !0;
      for (r = 0, n = E.length; r !== n; r += 1)
          (o = (i = E[r]).target) && o !== C ? I.push(i) : S.push(i);
      for (A = m.base || {}, j = I.length, r = 0, n = S.length; r !== n; r += 1)
          (i = q.extend({}, A, S[r])).origin = f.get(0), i.provEvt = d, i.$selElm = b, i.form = g, j && (i.actions = I), p.trigger(i.action + "." + B, i);
      return !0
  }), s.on("submit", t + " form", function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l,
          d,
          c,
          u,
          p,
          f,
          h,
          b,
          g = e.currentTarget,
          m = q(g),
          v = m.data(H),
          w = m.data(J) || [],
          y = v ? v.length : 0,
          x = [],
          k = [],
          A = !1;
      for (y && (n = (r = q("#" + v[y - 1])).data(H), q("#" + n[n.length - 1]).trigger(P), r.trigger(P)), a = 0; a !== y; a += 1)
          for (c = (i = (r = q("#" + v[a])).data(H)).length, d = 0; d !== c; d += 1) {
              if (o = q("#" + i[d]), s = q("#" + o.data(W)), k.push(s), l = s.data($), !(h = o.data(_)) && l.defaultIfNone) {
                  for (u = 0, p = (h = l.defaultIfNone).length; u !== p; u += 1)
                      (f = h[u]).origin = s.get(0), f.$selElm = s.prev().find("input, select").eq(0), f.provEvt = f.$selElm.get(0), f.form = g, s.trigger(f.action + "." + B, f);
                  h = o.data(_)
              }
              if (h)
                  for (u = 0, p = h.length; u !== p; u += 1)
                      (f = h[u]).form = g, r.trigger(f.action + "." + U, f), x.push({
                          $elm: r,
                          data: f
                      }), A = A || f.preventSubmit, b = f.provEvt
          }
      if (!A) {
          for (m.find(L).removeAttr("name"), y = w.length, a = 0; a !== y; a += 1)
              q(w[a]).remove();
          var j,
              C,
              E,
              S,
              I,
              T;
          if (w = [], (j = m.attr("action")) && 0 < (C = j.indexOf("?"))) {
              for (y = (T = j.substring(C + 1).split("&")).length, a = 0; a !== y; a += 1)
                  0 < (S = E = T[a]).indexOf("=") && (S = (I = E.split("=", 2))[0], E = I[1]), t = q("<input type='hidden' name='" + S + "' value='" + E + "' />"), m.append(t), w.push(t.get(0));
              m.data(J, w)
          }
      }
      for (y = k.length, a = 0; a !== y; a += 1)
          (l = (s = k[a]).data($)).action && x.push({
              $elm: s,
              data: l
          });
      for (y = x.length, a = 0; a !== y; a += 1)
          (f = x[a]).data.lastProvEvt = b, f.$elm.trigger(f.data.action + "." + R, f.data);
      if (A)
          return e.preventDefault(), e.stopPropagation ? e.stopImmediatePropagation() : e.cancelBubble = !0, !1
  }), s.on("keyup", t + " select", function(e) {
      if (-1 !== navigator.userAgent.indexOf("Gecko"))
          return e.keyCode && (1 === e.keyCode || 9 === e.keyCode || 16 === e.keyCode || e.altKey || e.ctrlKey) || q(e.target).trigger("change"), !0
  }), s.on(l, u, function(e, t) {
      var a = e.type;
      switch (e.namespace) {
      case M:
          switch (a) {
          case z:
              !function(e, t) {
                  if (e.namespace === M) {
                      var a,
                          r,
                          n,
                          i,
                          o,
                          s,
                          l,
                          d = e.target,
                          c = q(d),
                          u = q(t.source),
                          p = u.get(0),
                          f = t.lblselector || "." + w,
                          h = t.itmselector || "ul:first() > li";
                      u.hasClass(v) && (a = N.getData(u, z), u.data($, a), t = q.extend({}, t, a)), s = t.actions || [], l = t.renderas ? t.renderas : "select", p.id || (p.id = N.getId()), (n = u.children().first()).hasClass(b) ? (i = n.html(), h = "." + b + " + " + h) : (i = (r = n.find(f)).length ? r.html() : u.find("> p").html(), f = null), o = y(u.find(h)), t.outputctnrid || (t.outputctnrid = t.provEvt.parentElement.id), c.trigger(l + "." + Q, {
                          actions: s,
                          source: p,
                          attributes: t.attributes,
                          outputctnrid: t.outputctnrid,
                          label: i,
                          lblselector: f,
                          defaultselectedlabel: t.defaultselectedlabel,
                          required: !t.isoptional,
                          noreqlabel: t.noreqlabel,
                          items: o,
                          inline: t.inline
                      })
                  }
              }(e, t);
              break;
          case "tblfilter":
              !function(e, t) {
                  if (e.namespace === M) {
                      var a,
                          r,
                          n,
                          i,
                          o,
                          s,
                          l,
                          d,
                          c,
                          u,
                          p,
                          f,
                          h,
                          b = t.column,
                          g = t.csvextract,
                          m = t.source,
                          v = q(m),
                          w = [],
                          y = t.label,
                          x = t.defaultselectedlabel,
                          k = t.lblselector,
                          A = t.fltrseq ? t.fltrseq : [],
                          j = t.limit ? t.limit : 10;
                      if (!v.hasClass("wb-tables-inited"))
                          return v.one("wb-ready.wb-tables", function() {
                              q(e.target).trigger("tblfilter." + M, t)
                          });
                      if ((r = v.dataTable({
                          retrieve: !0
                      }).api()).rows({
                          search: "applied"
                      }).data().length <= j)
                          return;
                      if (h = t.renderas ? t.renderas : "select", !b && A.length) {
                          if (!(c = A.shift()).column)
                              throw "Column is undefined in the filter sequence";
                          b = c.column, g = c.csvextract, x = c.defaultselectedlabel, y = c.label, k = c.lblselector
                      }
                      if (a = r.column(b, {
                          search: "applied"
                      }), g)
                          for (o = 0, s = (n = a.data()).length; o !== s; o += 1)
                              w = w.concat(n[o].split(","));
                      else
                          for (o = 0, s = (n = a.nodes()).length; o !== s; o += 1)
                              for (l = 0, d = (i = q(n[o]).find("li")).length; l !== d; l += 1)
                                  w.push(q(i[l]).text());
                      w = w.sort().filter(function(e, t, a) {
                          return !t || e !== a[t - 1]
                      });
                      var C = e.target,
                          E = q(C),
                          S = [],
                          I = t.actions ? t.actions : [];
                      for (A.length && (f = {
                          action: "append",
                          srctype: "tblfilter",
                          source: m,
                          renderas: (u = A[0]).renderas ? u.renderas : h,
                          fltrseq: A,
                          limit: j
                      }), o = 0, s = w.length; o !== s; o += 1)
                          p = {
                              label: c = w[o],
                              actions: [{
                                  action: "tblfilter",
                                  source: m,
                                  column: b,
                                  value: c
                              }]
                          }, f && p.actions.push(f), S.push(p);
                      y || (y = a.header().textContent), t.outputctnrid || (t.outputctnrid = t.provEvt.parentElement.id), E.trigger(h + "." + Q, {
                          actions: I,
                          source: v.get(0),
                          outputctnrid: t.outputctnrid,
                          label: y,
                          defaultselectedlabel: x,
                          lblselector: k,
                          items: S,
                          inline: t.inline
                      })
                  }
              }(e, t)
          }
          break;
      case Q:
          switch (a) {
          case "select":
              !function(e, t) {
                  var a,
                      r,
                      n,
                      i,
                      o,
                      s,
                      l,
                      d,
                      c,
                      u = t.outputctnrid,
                      p = q("#" + u),
                      f = t.actions,
                      h = t.lblselector,
                      b = !!t.required,
                      g = !t.noreqlabel,
                      m = t.items,
                      v = e.target,
                      w = q(v),
                      y = t.source,
                      x = t.attributes,
                      k = w.data($).i18n,
                      A = N.getId(),
                      j = "<label for='" + A + "'",
                      C = "</span>",
                      E = t.defaultselectedlabel ? t.defaultselectedlabel : k.defaultsel;
                  if (b && g && (j += " class='required'", C += " <strong class='required'>(" + k.required + ")</strong>"), j += "><span class='field-name'>", C += "</label>", h ? (r = (a = q("<div>" + t.label + "</div>")).find(h)).html(j + r.html() + C) : a = q(j + t.label + C), n = "<select id='" + A + "' name='" + O + A + "' class='full-width form-control mrgn-bttm-md " + D + "' data-" + W + "='" + v.id + "' " + G + "='" + y.id + "'", b && (n += " required"), x && "object" == typeof x)
                      for (o in x)
                          x.hasOwnProperty(o) && (n += " " + o + "='" + x[o] + "'");
                  for (n += "><option value=''>" + E + "</option>", o = 0, s = m.length; o !== s; o += 1)
                      if ((c = m[o]).group) {
                          for (n += "<optgroup label='" + c.label + "'>", d = c.group.length, l = 0; l !== d; l += 1)
                              n += S(c.group[l]);
                          n += "</optgroup>"
                      } else
                          n += S(c);
                  i = q(n += "</select>"), p.append(a).append(i), f && 0 < f.length && i.data(V, f), Y(w, H, A)
              }(e, t);
              break;
          case "checkbox":
              t.typeRadCheck = "checkbox", i(e, t);
              break;
          case "radio":
              t.typeRadCheck = "radio", i(e, t)
          }
          break;
      case B:
          switch (a) {
          case "append":
              !function(e, t) {
                  if (e.namespace === B) {
                      var a = t.srctype ? t.srctype : z;
                      if (t.container = t.provEvt.parentNode.id, !t.source)
                          throw "A source is required to append a field flow control.";
                      q(e.currentTarget).trigger(a + "." + M, t)
                  }
              }(e, t);
              break;
          case "redir":
              Y(q(t.provEvt), _, t, !0);
              break;
          case "ajax":
              !function(e, t) {
                  var a,
                      r = t.provEvt;
                  t.live ? (t.container || (a = q("<div></div>"), q(r.parentNode).append(a), t.container = a.get(0)), q(e.target).trigger("ajax." + U, t)) : (t.preventSubmit = !0, Y(q(r), _, t))
              }(e, t);
              break;
          case "tblfilter":
              !function(e, t) {
                  if (e.namespace === B) {
                      var a,
                          r = t.source,
                          n = q(r).dataTable({
                              retrieve: !0
                          }).api(),
                          i = t.column,
                          o = parseInt(i, 10),
                          s = !!t.regex,
                          l = !t.smart || !!t.smart,
                          d = !t.caseinsen || !!t.caseinsen;
                      i = !0 === o ? o : i, (a = n.column(i)).search(t.value, s, l, d).draw(), q(t.provEvt).one(P, function() {
                          a.search("").draw()
                      })
                  }
              }(e, t);
              break;
          case "toggle":
              t.live ? n(e, t) : (t.preventSubmit = !0, Y(q(t.provEvt), _, t));
              break;
          case "addClass":
              if (!t.source || !t.class)
                  return;
              t.live ? q(t.source).addClass(t.class) : (t.preventSubmit = !0, Y(q(t.provEvt), _, t));
              break;
          case "removeClass":
              if (!t.source || !t.class)
                  return;
              t.live ? q(t.source).removeClass(t.class) : (t.preventSubmit = !0, Y(q(t.provEvt), _, t));
              break;
          case "query":
              r(0, t)
          }
          break;
      case U:
          switch (a) {
          case "redir":
              !function(e, t) {
                  var a = t.form,
                      r = t.url;
                  r && a.setAttribute("action", r)
              }(0, t);
              break;
          case "ajax":
              !function(e, t) {
                  var a,
                      r,
                      n,
                      i = t.clean;
                  t.container ? a = q(t.container) : (r = N.getId(), a = q("<div id='" + r + "'></div>"), q(t.form).append(a), i = "#" + r), i && q(t.origin).one(P, function() {
                      q(i).empty()
                  }), t.trigger && a.attr("data-trigger-wet", "true"), n = t.type ? t.type : "replace", a.attr("data-ajax-" + n, t.url), a.one("wb-contentupdated", function(e, t) {
                      var a = e.currentTarget,
                          r = a.getAttribute("data-trigger-wet");
                      a.removeAttribute("data-ajax-" + t["ajax-type"]), r && (q(a).find(N.allSelectors).addClass("wb-init").filter(":not(#" + a.id + " .wb-init .wb-init)").trigger("timerpoke.wb"), a.removeAttribute("data-trigger-wet"))
                  }), a.trigger("wb-update.wb-data-ajax")
              }(0, t);
              break;
          case "toggle":
              n(e, t);
              break;
          case "addClass":
              q(t.source).addClass(t.class);
              break;
          case "removeClass":
              q(t.source).removeClass(t.class);
              break;
          case "query":
              r(0, t)
          }
      }
  }), s.on("timerpoke.wb " + a, u, function(e) {
      switch (e.type) {
      case "timerpoke":
      case "wb-init":
          !function(e) {
              var t,
                  a,
                  r,
                  n,
                  i,
                  o = N.init(e, z, u);
              if (o) {
                  t = q(o), a = o.id, h.i18n[N.lang] && (h.i18n = h.i18n[N.lang]), (r = N.getData(t, z)) && r.i18n && (r.i18n = q.extend({}, h.i18n, r.i18n)), (n = q.extend({}, h, r)).defaultIfNone && !q.isArray(n.defaultIfNone) && (n.defaultIfNone = [n.defaultIfNone]), t.data($, n), i = n.i18n, String.prototype.startsWith || (String.prototype.startsWith = function(e, t) {
                      return t = t || 0, this.substr(t, e.length) === e
                  });
                  var s,
                      l,
                      d,
                      c = N.getId();
                  if (n.noForm) {
                      for (s = "<div class='mrgn-tp-md'><div id='" + c + "'></div></div>", l = o.parentElement; "FORM" !== l.nodeName;)
                          l = l.parentElement;
                      q(l.parentElement).addClass(p)
                  } else
                      s = (s = "<div class='wb-frmvld " + p + "'><form><div id='" + c + "'>") + '</div><input type="submit" value="' + i.btn + '" class="btn btn-primary mrgn-bttm-md" /> </form></div>';
                  t.addClass("hidden"), s = q(s), t.after(s), n.noForm || (l = s.find("form"), s.trigger("wb-init.wb-frmvld")), d = q(l), Y(d, H, a), n.outputctnrid || (n.outputctnrid = c), n.source || (n.source = o), n.srctype || (n.srctype = z), n.inline = !!n.inline, t.trigger(n.srctype + "." + M, n), n.unhideelm && q(n.unhideelm).removeClass("hidden"), n.hideelm && q(n.hideelm).addClass("hidden"), N.ready(t, z), n.ext && (n.form = d.get(0), t.trigger(n.ext + "." + f, n))
              }
          }(e)
      }
      return !0
  }), N.add(u)
}(jQuery, document, wb), function(f, h) {
  "use strict";
  var e = h.doc,
      b = {},
      g = {},
      m = function(e, t, a, r, n, i) {
          if (!window.jsonpointer)
              return setTimeout(function() {
                  m(e, t, a, r, n, i)
              }, 100), !1;
          i && (a = jsonpointer.get(a, i)), f("#" + e).trigger({
              type: "json-fetched.wb",
              fetch: {
                  response: a,
                  status: r,
                  xhr: n,
                  refId: t
              }
          }, this)
      };
  e.on("json-fetch.wb", function(e) {
      var t,
          a,
          s,
          r,
          n = e.element || e.target,
          l = e.fetch,
          i = l.url.split("#"),
          d = i[0],
          o = l.nocache,
          c = l.nocachekey || h.cacheBustKey || "wbCacheBust",
          u = i[1] || !1,
          p = l.refId;
      if (n === e.target || e.currentTarget === e.target) {
          if (n.id || (n.id = h.getId()), s = n.id, u) {
              if (91 === (a = u.split("/")[0]).charCodeAt(0))
                  return void f("#" + s).trigger({
                      type: "postpone.wb-jsonmanager",
                      postpone: {
                          callerId: s,
                          refId: p,
                          dsname: a,
                          selector: u.substring(a.length)
                      }
                  });
              l.url = d
          }
          o && (t = c + "=" + ("nocache" === o ? h.guid() : h.sessionGUID()), d = -1 !== d.indexOf("?") ? d + "&" + t : d + "?" + t, l.url = d), Modernizr.load({
              load: "site!deps/jsonpointer" + h.getMode() + ".js",
              complete: function() {
                  if (!l.nocache) {
                      if (r = b[d])
                          return void m(s, p, r, "success", void 0, u);
                      if (g[d])
                          return void g[d].push({
                              callerId: s,
                              refId: p,
                              selector: u
                          });
                      g[d] = []
                  }
                  f.ajax(l).done(function(e, t, a) {
                      var r,
                          n,
                          i,
                          o;
                      if (!l.nocache)
                          try {
                              b[d] = e
                          } catch (e) {
                              return
                          }
                      if (m(s, p, e, t, a, u), g[d])
                          for (n = (o = g[d]).length, r = 0; r !== n; r += 1)
                              i = o[r], m(i.callerId, i.refId, e, t, a, i.selector)
                  }).fail(function(e, t, a) {
                      f("#" + s).trigger({
                          type: "json-failed.wb",
                          fetch: {
                              xhr: e,
                              status: t,
                              error: a,
                              refId: p
                          }
                      }, this)
                  }, this)
              }
          })
      }
  })
}(jQuery, wb), function(m, p, v) {
  "use strict";
  function w(e, t, a, r) {
      e.after('<p lang="en"><strong>JSON Manager Debug</strong> (' + t + ')</p><ul lang="en"><li>JSON: <pre><code>' + JSON.stringify(a) + "</code></pre></li><li>Patches: <pre><code>" + JSON.stringify(r) + "</code></pre>")
  }
  function y(e, t, a, r) {
      var n,
          i;
      if (m.isArray(a) || (a = [a]), m.isArray(r) || (r = [r]), n = jsonpointer.get(e, t), m.isArray(n))
          for (i = n.length - 1; -1 !== i; i -= 1)
              d(n[i], a, r) || jsonpatch.apply(e, [{
                  op: "remove",
                  path: t + "/" + i
              }]);
      return e
  }
  var x = "wb-jsonmanager",
      f = "[data-" + x + "]",
      h = [],
      k = {},
      A = {},
      j = {},
      e = v.doc,
      b = {
          ops: [{
              name: "wb-count",
              fn: function(e, t, a) {
                  var r,
                      n,
                      i = e[t],
                      o = 0,
                      s = this.filter || [],
                      l = this.filternot || [];
                  if (m.isArray(s) || (s = [s]), m.isArray(l) || (l = [l]), (s.length || l.length) && m.isArray(i))
                      for (r = i.length, n = 0; n !== r; n += 1)
                          d(i[n], s, l) && (o += 1);
                  else
                      m.isArray(i) && (o = i.length);
                  jsonpatch.apply(a, [{
                      op: "add",
                      path: this.set,
                      value: o
                  }])
              }
          }, {
              name: "wb-first",
              fn: function(e, t, a) {
                  var r = e[t];
                  m.isArray(r) && 0 !== r.length && jsonpatch.apply(a, [{
                      op: "add",
                      path: this.set,
                      value: r[0]
                  }])
              }
          }, {
              name: "wb-last",
              fn: function(e, t, a) {
                  var r = e[t];
                  m.isArray(r) && 0 !== r.length && jsonpatch.apply(a, [{
                      op: "add",
                      path: this.set,
                      value: r[r.length - 1]
                  }])
              }
          }, {
              name: "wb-nbtolocal",
              fn: function(e, t, a) {
                  var r = e[t],
                      n = this.locale || p.wb.lang,
                      i = this.suffix || "",
                      o = this.prefix || "";
                  "string" == typeof r && (r = parseFloat(r), isNaN(r)) || jsonpatch.apply(a, [{
                      op: "replace",
                      path: this.path,
                      value: o + r.toLocaleString(n) + i
                  }])
              }
          }, {
              name: "wb-toDateISO",
              fn: function(e, t, a) {
                  this.set ? jsonpatch.apply(a, [{
                      op: "add",
                      path: this.set,
                      value: v.date.toDateISO(e[t])
                  }]) : jsonpatch.apply(a, [{
                      op: "replace",
                      path: this.path,
                      value: v.date.toDateISO(e[t])
                  }])
              }
          }, {
              name: "wb-toDateTimeISO",
              fn: function(e, t, a) {
                  this.set ? jsonpatch.apply(a, [{
                      op: "add",
                      path: this.set,
                      value: v.date.toDateISO(e[t], !0)
                  }]) : jsonpatch.apply(a, [{
                      op: "replace",
                      path: this.path,
                      value: v.date.toDateISO(e[t], !0)
                  }])
              }
          }],
          opsArray: [{
              name: "wb-toDateISO",
              fn: function(e) {
                  var t,
                      a = this.set,
                      r = this.path,
                      n = e.length;
                  for (t = 0; t !== n; t += 1)
                      a ? jsonpatch.apply(e, [{
                          op: "wb-toDateISO",
                          set: "/" + t + a,
                          path: "/" + t + r
                      }]) : jsonpatch.apply(e, [{
                          op: "wb-toDateISO",
                          path: "/" + t + r
                      }])
              }
          }, {
              name: "wb-toDateTimeISO",
              fn: function(e) {
                  var t,
                      a = this.set,
                      r = this.path,
                      n = e.length;
                  for (t = 0; t !== n; t += 1)
                      a ? jsonpatch.apply(e, [{
                          op: "wb-toDateTimeISO",
                          set: "/" + t + a,
                          path: "/" + t + r
                      }]) : jsonpatch.apply(e, [{
                          op: "wb-toDateTimeISO",
                          path: "/" + t + r
                      }])
              }
          }],
          opsRoot: [],
          settings: {}
      },
      d = function(e, t, a) {
          var r,
              n,
              i,
              o = t.length,
              s = a.length,
              l = !1;
          if (o || s) {
              for (r = 0; r < o; r += 1)
                  if (n = t[r], i = c(jsonpointer.get(e, n.path), n.value), n.optional)
                      l = l || i;
                  else {
                      if (!i)
                          return !1;
                      l = !0
                  }
              if (o && !l)
                  return !1;
              for (r = 0; r < s; r += 1)
                  if (n = a[r], (i = c(jsonpointer.get(e, n.path), n.value)) && !n.optional || i && n.optional)
                      return !1
          }
          return !0
      },
      c = function(e, t) {
          switch (typeof e) {
          case "undefined":
              return !1;
          case "boolean":
          case "string":
          case "number":
              return e === t;
          case "object":
              if (null === e)
                  return null === t;
              if (m.isArray(e)) {
                  if (m.isArray(t) || e.length !== t.length)
                      return !1;
                  for (var a = 0, r = e.length; a < r; a++)
                      if (!c(e[a], t[a]))
                          return !1;
                  return !0
              }
              var n = i(t).length;
              if (i(e).length !== n)
                  return !1;
              for (a = 0; a < n; a++)
                  if (!c(e[a], t[a]))
                      return !1;
              return !0;
          default:
              return !1
          }
      },
      i = function(e) {
          if (m.isArray(e)) {
              for (var t = new Array(e.length), a = 0; a < t.length; a++)
                  t[a] = "" + a;
              return t
          }
          if (Object.keys)
              return Object.keys(e);
          t = [];
          for (var r in e)
              e.hasOwnProperty(r) && t.push(r);
          return t
      };
  v.ie && (Number.prototype.toLocaleString = function(e) {
      var t,
          a = this.toString().split("."),
          r = a[0],
          n = a[1],
          i = r.length,
          o = i % 3 || 3,
          s = r.substr(0, o),
          l = "fr" === e,
          d = l ? " " : ",";
      for (t = o; t < i; t += 3)
          s = s + d + r.substr(t, 3);
      return n.length && (s = l ? s + "," + n : s + "." + n), s
  }), e.on("json-failed.wb", f, function(e) {
      var t,
          a = e.target;
      a === e.currentTarget && ((t = m(a)).addClass("jsonfail"), v.ready(t, x))
  }), e.on("json-fetched.wb", f, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l,
          d,
          c,
          u,
          p,
          f = e.target,
          h = m(f),
          b = e.fetch.response,
          g = m.isArray(b);
      if (f === e.currentTarget) {
          a = "[" + (t = v.getData(h, x)).name + "]", d = t.patches || [], p = t.fpath, c = t.filter || [], u = t.filternot || [], m.isArray(d) || (d = [d]), b = g ? m.extend([], b) : m.extend({}, b), p && (b = y(b, p, c, u)), d.length && (g && t.wraproot && ((o = {})[t.wraproot] = b, b = o), jsonpatch.apply(b, d)), t.debug && w(h, "initEvent", b, d);
          try {
              k[a] = b
          } catch (e) {
              return
          }
          if (!(A[a] = t).wait && j[a])
              for (i = (s = j[a]).length, n = 0; n !== i; n += 1) {
                  if ((l = (o = s[n]).selector).length)
                      try {
                          r = jsonpointer.get(b, l)
                      } catch (e) {
                          throw a + " - JSON selector not found: " + l
                      }
                  else
                      r = b;
                  m("#" + o.callerId).trigger({
                      type: "json-fetched.wb",
                      fetch: {
                          response: r,
                          status: "200",
                          refId: o.refId,
                          xhr: null
                      }
                  }, this)
              }
          v.ready(h, x)
      }
  }), e.on("patches.wb-jsonmanager", f, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l,
          d,
          c = e.target,
          u = m(c),
          p = e.patches,
          f = e.fpath,
          h = e.filter || [],
          b = e.filternot || [],
          g = !!e.cumulative;
      if (c === e.currentTarget && m.isArray(p)) {
          if (!(t = v.getData(u, x)))
              return !0;
          if (a = "[" + t.name + "]", !j[a])
              throw "Applying patched on undefined dataset name: " + a;
          for (r = k[a], g || (r = m.extend(!0, m.isArray(r) ? [] : {}, r)), f && (r = y(r, f, h, b)), jsonpatch.apply(r, p), t.debug && w(u, "patchesEvent", r, p), s = (i = j[a]).length, o = 0; o !== s; o += 1) {
              if ((d = (l = i[o]).selector).length)
                  try {
                      n = jsonpointer.get(r, d)
                  } catch (e) {
                      throw a + " - JSON selector not found: " + d
                  }
              else
                  n = r;
              m("#" + l.callerId).trigger({
                  type: "json-fetched.wb",
                  fetch: {
                      response: n,
                      status: "200",
                      refId: l.refId,
                      xhr: null
                  }
              }, this)
          }
      }
  }), e.on("postpone.wb-jsonmanager", function(e) {
      var t,
          a = e.postpone,
          r = a.dsname,
          n = a.callerId,
          i = a.refId,
          o = a.selector;
      if (j[r] || (j[r] = []), j[r].push({
          callerId: n,
          refId: i,
          selector: o
      }), k[r] && !A[r].wait) {
          if (t = k[r], o.length)
              try {
                  t = jsonpointer.get(t, o)
              } catch (e) {
                  throw r + " - JSON selector not found: " + o
              }
          m("#" + n).trigger({
              type: "json-fetched.wb",
              fetch: {
                  response: t,
                  status: "200",
                  refId: i,
                  xhr: null
              }
          }, this)
      }
  }), e.on("op.action.wb-fieldflow", ".wb-fieldflow", function(e, t) {
      t.op && (t.preventSubmit = !0, function(e, t, a, r) {
          var n = e.data(t);
          n && !r || (n = []), n.push(a), e.data(t, n)
      }(m(t.provEvt), "wb-fieldflow-submit", t))
  }), e.on("op.submit.wb-fieldflow", ".wb-fieldflow", function(e, t) {
      var a,
          r = t.op,
          n = t.source;
      if (!r)
          return !0;
      m.isArray(r) ? a = r : (a = []).push(r), m(n).trigger({
          type: "patches.wb-jsonmanager",
          patches: a
      })
  }), e.on("timerpoke.wb wb-init.wb-jsonmanager", f, function(e) {
      var t,
          a,
          r,
          n,
          i,
          o,
          s,
          l,
          d,
          c = v.init(e, x, f),
          u = p[x] || {};
      c && (t = m(c), Modernizr.load({
          load: "site!deps/json-patch" + v.getMode() + ".js",
          testReady: function() {
              return p.jsonpatch
          },
          complete: function() {
              var e = v.getData(t, x);
              if (!b.registered) {
                  if (a = b.ops.concat(u.ops || []), r = b.opsArray.concat(u.opsArray || []), n = b.opsRoot.concat(u.opsRoot || []), a.length)
                      for (i = 0, o = a.length; i !== o; i++)
                          s = a[i], jsonpatch.registerOps(s.name, s.fn);
                  if (r.length)
                      for (i = 0, o = r.length; i !== o; i++)
                          s = r[i], jsonpatch.registerOpsArray(s.name, s.fn);
                  if (n.length)
                      for (i = 0, o = n.length; i !== o; i++)
                          s = n[i], jsonpatch.registerOpsRoot(s.name, s.fn);
                  b.settings = m.extend({}, b.settings, u.settings || {}), b.registered = !0
              }
              if (!(d = e.name) || d in h)
                  throw "Dataset name must be unique";
              h.push(d), (l = e.url) ? (t.trigger({
                  type: "json-fetch.wb",
                  fetch: {
                      url: l,
                      nocache: e.nocache,
                      nocachekey: e.nocachekey
                  }
              }), 35 === l.charCodeAt(0) && 91 === l.charCodeAt(1) && v.ready(t, x)) : v.ready(t, x)
          }
      }))
  }), v.add(f)
}(jQuery, window, wb), function(r, n) {
  "use strict";
  var t,
      i,
      v,
      o,
      w,
      s = "gcweb-menu",
      y = "." + s,
      e = n.doc,
      a = y + " [data-ajax-replace]," + y + " [data-ajax-append]," + y + " [data-ajax-prepend]," + y + " [data-wb-ajax]",
      l = 350,
      d = {
          en: "Press the SPACEBAR to expand or the escape key to collapse this menu. Use the Up and Down arrow keys to choose a submenu item. Press the Enter or Right arrow key to expand it, or the Left arrow or Escape key to collapse it. Use the Up and Down arrow keys to choose an item on that level and the Enter key to access it.",
          fr: "Appuyez sur la barre d'espacement pour ouvrir ou sur la touche d'échappement pour fermer le menu. Utilisez les flèches haut et bas pour choisir un élément de sous-menu. Appuyez sur la touche Entrée ou sur la flèche vers la droite pour le développer, ou sur la flèche vers la gauche ou la touche Échap pour le réduire. Utilisez les flèches haut et bas pour choisir un élément de ce niveau et la touche Entrée pour y accéder."
      },
      c = function(e) {
          var t = r(e).parentsUntil(y).parents(),
              a = document.querySelector("html").className;
          v = -1 !== a.indexOf("smallview"), o = -1 !== a.indexOf("mediumview"), (v || o) && u(!1, o), e.previousElementSibling.setAttribute("aria-label", d), n.ready(t, s)
      };
  function x(e) {
      if ("true" !== e.getAttribute("aria-expanded")) {
          var t = e.parentElement.parentElement.querySelector("[aria-haspopup][aria-expanded=true]:not([data-keep-expanded=md-min])");
          t && !v && k(t, !0), e.setAttribute("aria-expanded", "true"), i = e, setTimeout(function() {
              i = !1
          }, l)
      }
  }
  function k(e, t) {
      if (e.hasAttribute("aria-haspopup") || (e = e.previousElementSibling), !t) {
          var a = e.nextElementSibling.querySelector("[role=menuitem]:focus"),
              r = e.parentElement.parentElement.querySelector("[role=menuitem]:focus");
          if (a || r === e)
              return
      }
      e.setAttribute("aria-expanded", "false")
  }
  function u(e, t) {
      var a,
          r = document.querySelectorAll("[role=menu] [role=menu] [role=menuitem][aria-haspopup=true]"),
          n = r.length,
          i = t ? "true" : "false",
          o = e ? "vertical" : "horizontal",
          s = i;
      for (a = 0; a < n; a++)
          s = r[a].nextElementSibling.querySelector("[role=menuitem]:focus") ? "true" : i, r[a].setAttribute("aria-expanded", s), r[a].parentElement.previousElementSibling.setAttribute("aria-orientation", o)
  }
  e.on("mouseenter", y + " ul [aria-haspopup]", function(e) {
      v || (clearTimeout(void 0), function(e) {
          "md-min" !== e.dataset.keepExpanded && (clearTimeout(t), t = setTimeout(function() {
              x(e)
          }, l))
      }(e.currentTarget))
  }), e.on("focusin", y + " ul [aria-haspopup]", function(e) {
      v ? w = !1 : x(e.currentTarget)
  }), e.on("mouseenter focusin", y + " [aria-haspopup] + [role=menu]", function(e) {
      "md-min" !== e.currentTarget.previousElementSibling.dataset.keepExpanded && (v || i === e.currentTarget || clearTimeout(void 0))
  }), e.on("mouseleave", y + " [aria-haspopup]", function() {
      clearTimeout(t)
  }), e.on("click", y + " [aria-haspopup]", function(e) {
      var t,
          a = e.currentTarget;
      w ? w = !1 : (!v && "BUTTON" !== a.nodeName || ("true" === a.getAttribute("aria-expanded") ? i !== a && k(a, !0) : (x(a), (t = a.nextElementSibling.querySelector("[role=menuitem]")).focus(), t.setAttribute("tabindex", "0"))), e.stopImmediatePropagation(), e.preventDefault())
  }), e.on(n.resizeEvents, function(e) {
      switch (e.type) {
      case "xxsmallview":
      case "xsmallview":
      case "smallview":
          u(!(v = !0), !1);
          break;
      case "mediumview":
          u(v = !1, !0);
          break;
      case "largeview":
      case "xlargeview":
      default:
          u(!(v = !1), !0)
      }
  }), e.on("keydown", function(e) {
      27 === e.keyCode && k(document.querySelector(y + " button"))
  }), e.on("keydown", y + " button, " + y + " [role=menuitem]", function(e) {
      var t = e.currentTarget,
          a = function(e) {
              return 9 === e ? "tab" : 13 === e || 32 === e ? "enter" : 27 === e ? "esc" : 39 === e ? "right" : 37 === e ? "left" : 40 === e ? "down" : 38 === e && "up"
          }(e.charCode || e.keyCode),
          r = document.querySelector("[role=menuitem]:focus") || t,
          n = r.parentElement,
          i = n.parentElement,
          o = "BUTTON" === r.nodeName;
      if ("tab" !== a)
          if (o && "enter" === a && "true" === t.getAttribute("aria-expanded"))
              k(t, w = !0);
          else {
              var s,
                  l;
              r.nextElementSibling && (s = r.nextElementSibling.querySelector("[role='menuitem']")), n.nextElementSibling ? (l = n.nextElementSibling.querySelector("[role=menuitem]")) || (l = n.nextElementSibling.nextElementSibling.querySelector("[role=menuitem]")) : l = !v && r.dataset.keepExpanded && s ? s : !v && i.previousElementSibling.dataset.keepExpanded ? i.parentElement.parentElement.querySelector("[role=menuitem]") : i.querySelector("[role=menuitem]");
              var d,
                  c = i.previousElementSibling;
              n.previousElementSibling ? (d = n.previousElementSibling.querySelector("[role=menuitem]")) || (d = n.previousElementSibling.previousElementSibling.querySelector("[role=menuitem]")) : d = !v && i.lastElementChild.querySelector("[role=menuitem]").dataset.keepExpanded ? i.lastElementChild.querySelector("[role=menuitem]").nextElementSibling.lastElementChild.querySelector("[role=menuitem]") : !v && i.previousElementSibling.dataset.keepExpanded && c ? c : o ? r.nextElementSibling.lastElementChild.querySelector("[role=menuitem]") : i.lastElementChild.querySelector("[role=menuitem]");
              for (var u, p, f, h, b, g = n; g.nextElementSibling;)
                  if ("separator" === (g = g.nextElementSibling).getAttribute("role")) {
                      u = !(!g.hasAttribute("aria-orientation") || "vertical" !== g.getAttribute("aria-orientation")), p = g.nextElementSibling.querySelector("[role=menuitem]");
                      break
                  }
              for (g = n; g.previousElementSibling;) {
                  if ("separator" === (g = g.previousElementSibling).getAttribute("role")) {
                      if (h)
                          break;
                      f = !(!g.hasAttribute("aria-orientation") || "vertical" !== g.getAttribute("aria-orientation")), h = g.previousElementSibling
                  }
                  h && (h = g)
              }
              if (h && (h = h.querySelector("[role=menuitem]")), o || r.setAttribute("tabindex", "-1"), "down" === a && l)
                  b = l;
              else if ("up" === a && d)
                  b = d;
              else if (!o && "right" === a && s || "enter" === a && s)
                  b = s;
              else if (u && "right" === a)
                  b = p;
              else if (f && "left" === a)
                  b = h;
              else if (!o && "left" === a || !o && "esc" === a)
                  b = c;
              else if ("tab" === a)
                  return;
              if ("left" !== a && "esc" !== a || (!o && v && "true" === b.getAttribute("aria-expanded") ? b.setAttribute("aria-expanded", "false") : o && t.setAttribute("aria-expanded", "false")), b) {
                  if (v || o) {
                      var m = b.parentElement.parentElement.previousElementSibling;
                      "true" !== m.getAttribute("aria-expanded") && x(m)
                  }
                  b.setAttribute("tabindex", "0"), b.focus(), e.stopImmediatePropagation(), e.preventDefault()
              }
          }
      else
          k(document.querySelector(y + " button"), !0)
  }), e.on("ajax-fetched.wb ajax-failed.wb", a, function(e) {
      var t = e.target;
      e.currentTarget === t && c(t)
  }), e.on("timerpoke.wb wb-init.gcweb-menu", y, function(e) {
      var t = n.init(e, s, y);
      t && (d[n.lang] ? d = d[n.lang] : d.en && (d = d.en), t.querySelector(a) || c(t.querySelector("[role=menu]")))
  }), n.add(y)
}(jQuery, wb), function(p, s, l) {
  "use strict";
  function d(e, t, a) {
      var r,
          n,
          i,
          o,
          s,
          l,
          d;
      for (n = (a = p.isArray(a) ? p.extend([], a) : [a]).length, r = 0; r !== n; r += 1)
          if (o = (i = a[r]).action) {
              if (s = i.match, d = i.default, l = !1, s && !d)
                  throw "'match' and 'default' property need to be set";
              if (d && t.length && "string" == typeof s)
                  try {
                      l = (l = new RegExp(s).exec(t)) || d
                  } catch (e) {}
              switch (!i.qval && l && (i.qval = l), o) {
              case "patch":
                  var c = i.patches,
                      u = i.base || "/";
                  c || (c = [h], i.cumulative = !0), p.isArray(c) || (c = [c]), c = b(c, i.qval, u), i.patches = c;
                  break;
              case "ajax":
                  i.trigger && e[0] !== f && (i.trigger = !1), i.url = g(i.url, i.qval);
                  break;
              case "tblfilter":
                  i.value = g(i.value, i.qval)
              }
          }
      e.trigger({
          type: "do.wb-actionmng",
          actions: a
      })
  }
  var f,
      c = "wb-urlmapping",
      r = "[data-" + c + "]",
      n = "domapping." + c,
      i = l.doc,
      h = {
          op: "move",
          path: "{base}",
          from: "{base}/{qval}"
      },
      b = function(e, t, a) {
          var r,
              n,
              i,
              o = e.length,
              s = [];
          for (a || (a = "/"), r = 0; r !== o; r += 1)
              n = e[r], i = p.extend({}, n), n.path && (i.path = g(n.path, t, a)), n.from && (i.from = g(n.from, t, a)), n.value && (i.value = g(n.value, t, a)), s.push(i);
          return s
      },
      g = function(e, t, a) {
          return t ? a ? e.replace(/\{qval\}/, t).replace(/\{base\}/, a) : e.replace(/\{qval\}/, t) : e
      };
  i.on(n, r, function(e) {
      var t,
          a,
          r,
          n = p(e.target),
          i = function() {
              for (var e = {}, t = /\+/g, a = /([^&=]+)=?([^&]*)/g, r = function(e) {
                      return decodeURIComponent(e.replace(t, " "))
                  }, n = s.location.search.substring(1), i = a.exec(n); i;)
                  e[r(i[1])] = r(i[2]), i = a.exec(n);
              return e
          }(),
          o = p.extend({}, s[c] || {}, l.getData(n, c));
      for (t in i)
          if ("object" == typeof (r = o[t + "=" + (a = i[t])] || o[t]) && (d(n, a, r), !o.multiplequery))
              break
  }), i.on("timerpoke.wb wb-init.wb-urlmapping", r, function(e) {
      var t,
          a = l.init(e, c, r);
      a && (t = p(a), f || (f = a), l.ready(t, c), l.isReady ? t.trigger(n) : i.one("wb-ready.wb", function() {
          t.trigger(n)
      }))
  }), l.add(r)
}(jQuery, window, wb), function(a, e, o) {
  "use strict";
  function n(e) {
      0 < e.length && a(this).trigger({
          type: "ajax-fetch.wb",
          fetch: {
              url: o.pageUrlParts.protocol + "//clients1.google.com/complete/search?client=partner&sugexp=gsnos%2Cn%3D13&gs_rn=25&gs_ri=partner&partnerid=" + window.encodeURIComponent("008724028898028201144:knjjdikrhq0+lang:" + o.lang) + "&types=t&ds=cse&cp=3&gs_id=b&hl=" + o.lang + "&q=" + encodeURI(e),
              dataType: "jsonp",
              jsonp: "callback"
          }
      })
  }
  var t = o.doc,
      r = "#wb-srch-q",
      s = a(r),
      l = a("#" + s.attr("list"));
  t.on("change keyup", r, function(e) {
      var t = e.target,
          a = e.target.value,
          r = e.which;
      switch (e.type) {
      case "change":
          n.call(t, a);
          break;
      case "keyup":
          e.ctrlKey || e.altKey || e.metaKey || (32 === r || 47 < r && r < 91 || 95 < r && r < 112 || 159 < r && r < 177 || 187 < r && r < 223) && n.call(t, a)
      }
  }), t.on("ajax-fetched.wb", r, function(e) {
      var t,
          a,
          r = e.fetch.response[1],
          n = r.length,
          i = "";
      for (l.empty(), t = 0; t < n; t += 1)
          i += '<option label="' + (a = r[t])[0] + '" value="' + a[0] + '"></option>';
      o.ielt10 && (i = "<select>" + i + "</select>"), l.append(i), s.trigger("wb-update.wb-datalist")
  }), window["wb-data-ajax"] = {
      corsFallback: function(e) {
          return e.url = e.url.replace(".html", ".htmlp"), e
      }
  }, a("[data-reveal]").change(function() {
      var e = a(this),
          t = e.attr("data-reveal");
      return e.is(":checked") ? a(t).removeClass("hide") : a(t).addClass("hide")
  })
}(jQuery, document, wb), function(f, u, l) {
  "use strict";
  function o(e) {
      if ("click" === e.type)
          return !0;
      if ("keypress" !== e.type)
          return !1;
      var t = e.charCode || e.keyCode;
      return 32 === t || 13 === t || void 0
  }
  var t,
      d = (t = new RegExp("{{\\s*([a-z0-9_$][\\.a-z0-9_]*)\\s*}}", "gi"), function(e, d, c) {
          return e.replace(t, function(e, t) {
              for (var a, r, n, i = t.split("."), o = i.length, s = d, l = 0; l < o; l += 1) {
                  if (void 0 === (s = s[i[l]]))
                      throw "tim: '" + i[l] + "' not found in " + e;
                  if (l === o - 1)
                      return f.isNumeric(s) && c ? (a = s, r = c, n = Math.pow(10, r || 0), Math.round(a * n) / n).toLocaleString(u.documentElement.lang) : f.isNumeric(s) ? s.toLocaleString(u.documentElement.lang) : s
              }
          })
      });
  function s(e, r, t, n) {
      var a = f('[data-wbtbl-search$="@' + t + "@" + n + '"],[data-wbtbl-highlight$="@' + t + "@" + n + '"]');
      r ? a.removeClass("pick") : a.addClass("pick"), f('form[data-wb5-bind="#' + e.table().node().id + '"]').find('[value^="' + t + "@" + n + '"],[data-wbtbl-bind^="' + t + "@" + n + '"]').each(function(e, t) {
          var a = f(t);
          return a.is("[type=checkbox],[type=radio]") ? a.prop("checked", r) : a.is("[type=text],[type=textarea]") ? a.val(r ? n : "") : a.get(0).selected = r, !0
      })
  }
  function c() {
      var e = f(this),
          r = [],
          t = e.relatives().DataTable(),
          a = e.command(this.getAttribute("data-wbtbl-post")),
          n = [];
      if (e.find(a.selector).each(function(e, t) {
          var a = f(t);
          if (a.is("[type=checkbox]")) {
              if (a.is(":checked")) {
                  if (a.is("[data-xor]"))
                      return n.push(a.val()), !0;
                  r.push(a.val())
              }
              return !0
          }
          r.push(a.val())
      }), 1 < n.length) {
          for (var i = {}, o = !1, s = n.length - 1; 0 <= s; s--) {
              var l = n[s].split("@");
              i.hasOwnProperty(l[0]) || (i[l[0]] = []), i[l[0]].push("(" + l[1] + ")")
          }
          for (var o in i)
              r.push(o + "@" + i[o].join("|"))
      } else
          1 === n.length && r.push(n[0]);
      for (var d = r.length - 1; 0 <= d; d--) {
          var c = r[d].split("@"),
              u = c[0],
              p = c[1];
          -1 === p.indexOf("|") ? (p = p.replace(/^\(/, "").replace(/\)$/, ""), t.column(u).search(p)) : t.column(u).search(p, !0)
      }
  }
  f.fn.extend({
      relatives: function() {
          var a = f();
          return this.each(function(e, t) {
              t.wb5 && t.wb5.relatives && t.wb5.relatives.each(function() {
                  a = a.add(this)
              })
          }), a
      },
      related: function(a, r) {
          return this.each(function(e, t) {
              r && t.wb5 && t.wb5.relatives && t.wb5.relatives.each(function() {
                  a = a.add(this)
              }), f.extend(t, {
                  wb5: {
                      relatives: a
                  }
              })
          }), this
      }
  }), f.fn.extend({
      shuffle: function() {
          var a = this.get(),
              t = f.map(a, function() {
                  var e = Math.floor(Math.random() * a.length),
                      t = f(a[e]).clone(!0)[0];
                  return a.splice(e, 1), t
              });
          return this.each(function(e) {
              f(this).replaceWith(f(t[e]))
          }), f(t)
      }
  }), f.fn.extend({
      rand: function(e) {
          var t = this,
              a = t.size();
          if (a < (e = e ? parseInt(e) : 1))
              return t.pushStack(t);
          if (1 == e)
              return t.filter(":eq(" + Math.floor(Math.random() * a) + ")");
          r = t.get();
          for (var n = 0; n < a - 1; n++) {
              var i = Math.floor(Math.random() * (a - n)) + n;
              r[i] = r.splice(n, 1, r[i])[0]
          }
          return r = r.slice(0, e), t.filter(function(e) {
              return -1 < f.inArray(t.get(e), r)
          })
      }
  }), f.fn.extend({
      notEmpty: function() {
          return 0 !== this.length
      }
  }), f.fn.extend({
      command: function(e) {
          if (e.length) {
              var t = e.split("@");
              return {
                  command: t[0],
                  selector: t[1],
                  options: t[2]
              }
          }
          return {
              command: !1,
              selector: !1
          }
      }
  }), f("[data-wb5-bind]").each(function(e, t) {
      var a,
          r = f(t);
      r.parents().is("template") || (a = f(r.attr("data-wb5-bind"))).notEmpty() && r.related(a)
  }), f(u).on("keypress click", "[data-wb5-debug]", function(e) {
      if (!o(e))
          return !0;
      for (var t = f(this), a = t.attr("data-wb5-debug").split(","), r = a.length - 1; 0 <= r; r--)
          console.log(t[a[r]]())
  }), f(u).on("preInit.dt", ".wb-tables", function() {
      var e = f("form[data-wbtbl-post]").get(0);
      e && c.call(e)
  }), f(u).on("draw.dt", ".wb-tables", function(e) {
      var t = f(this),
          a = t.DataTable();
      t.relatives().trigger({
          type: e.type,
          table: a,
          displayed: a.page.info().recordsDisplay,
          total: a.page.info().recordsTotal
      })
  }), Modernizr.details || f(u).on("draw.dt", ".wb-tables", function(e) {
      f(this).find("summary").removeClass("wb-init").removeClass("wb-details-inited").trigger("wb-init.wb-details")
  }), f(u).on("draw.dt", "[data-wbtbl-draw]", function(e) {
      var t = f(this),
          a = t.command(t.attr("data-wbtbl-draw")),
          r = e.table,
          n = f(r.table().node()),
          i = e.displayed !== e.total,
          o = 0,
          s = e.total;
      e.displayed;
      switch (a.command) {
      case "display":
          return function(e, t) {
              return e.is(":input") ? e.val(t) : e.text(t), !0
          }(t, r.page.info()[a.options]);
      case "count":
          if ((i ? r.rows({
              search: "applied"
          }) : r.rows({
              page: "all"
          })).iterator("row", function(e, t) {
              -1 < f(this.row(t).node()).text().indexOf(a.options) && o++
          }), t.is("progress")) {
              if (t.attr({
                  max: s,
                  value: o
              }), n.hasClass("wbtbl-silent"))
                  return !0;
              t.trigger("updated.wb5")
          }
          return t.text(o)
      }
  }), f("[data-wbtbl-reset]").on("click", function(e) {
      var t = this.getAttribute("data-wbtbl-reset").split("@"),
          a = f(t[0]).DataTable();
      return a.search("").columns().search(""), "all" === t[1] ? a.search("").columns().search("").draw() : a.column(t[1]).search("").draw()
  }), f(u).on("wb-ready.wb-tables", "[data-wbtbl-tag=enable]", function() {
      var e = f(this),
          t = e.closest(".dataTables_wrapper");
      t.addClass("tagcloud").find(".top").append('<div data-wbtbl-tagcloud="active" aria-live="polite"></div>'), e.related(t.find("[data-wbtbl-tagcloud]").eq(0), !0), t.find("[data-wbtbl-tagcloud]").eq(0).trigger({
          type: "draw.dt",
          table: e.eq(0).dataTable().api()
      })
  }), f(u).on("draw.dt", "[data-wbtbl-tagcloud]", function(e) {
      function t() {
          var e = this.search();
          if (e) {
              var t = e.split("|"),
                  a = '<li><span class="tagitem" data-wbtbl-col-idx="' + r + '"><span class="content">' + t.map(function(e) {
                      return e.replace(/[{()}]/g, "")
                  }).join(" &amp; ") + '</span> <button type="button" class="close" tabindex="0" aria-label="' + l.i18n("geo-aoi-btnclear") + '"><span aria-hidden="true">&times;</span></button></span></li>';
              n.find("ul").append(a)
          }
          r++
      }
      var a = e.table,
          r = -1,
          n = f(this);
      n.html('<ul class="list-inline tags" aria-live="polite"></ul><div class="clearfix"></div>'), t.call(a), a.columns().every(t)
  }), f(u).on("updated.wb5", "[data-wb5-update]", function(e) {
      var t = f(this).relatives(),
          a = this.getAttribute("max"),
          r = this.getAttribute("value"),
          n = (this.getAttribute("data-percentage"), Math.ceil(r / a * 100) || 0);
      t.find(".meter").text(r), t.removeClass(function(e, t) {
          return (t.match(/(^|\s)p\d+/g) || []).join(" ")
      }).attr("data-percentage", "p" + n), t.addClass("p" + n)
  }), f(u).on("keypress click", "[data-wbtbl-highlight]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wbtbl-highlight")),
          r = t.relatives().DataTable();
      t.relatives().removeClass("wbtbl-silent").addClass("wbtbl-silent"), r.column(a.selector).search(a.options, !1, !1, !0).draw()
  }), f(u).on("keypress click", "[data-wbtbl-search]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wbtbl-search")),
          r = t.relatives().DataTable();
      t.relatives().removeClass("wbtbl-silent"), r.search("").columns().search(""), r.column(a.selector).search(a.options, !1, !1, !0).draw()
  }), f(u).on("submit", "[data-wbtbl-submit]", function(e) {
      var t = f(this),
          a = t.command(this.getAttribute("data-wbtbl-submit")),
          r = t.relatives().DataTable(),
          n = a.selector,
          i = a.options;
      return t.relatives(), r.search("").columns().search(""), n && (r = r.column(n)), r.search(t.find("input").val(), !1, i && "smart" === i, !0).draw(), !1
  }), f(u).on("keypress click", "[data-wb5-ajax]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wb5-ajax")),
          r = t.relatives();
      switch (r.attr("aria-live", "polite"), a.command) {
      case "replace":
          f.get(a.options, function(e) {
              r.html(e)
          })
      }
  }), f(u).on("keypress click", "[data-wb5-load]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wb5-load")),
          r = t.relatives();
      switch (r.attr({
          "aria-relevant": "all",
          "aria-live": "polite",
          "aria-atomic": "true"
      }), a.command) {
      case "replace":
          r.load(a.options)
      }
  }), f(u).on("keypress click", "[data-wb5-trigger]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wb5-trigger"));
      t.relatives().trigger(a.command)
  }), f(u).on("keypress click", "[data-wb5-profile]", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.command(this.getAttribute("data-wb5-profile"));
      "single" === a.command && (t.relatives().removeClass(a.options).filter("[role=button]").attr("aria-pressed", "false"), f(e.target).closest(t.relatives()).addClass(a.options).filter("[role=button]").attr("aria-pressed", "true"))
  }), f(u).on("keypress click", "[data-wbtbl-tagcloud] li button", function(e) {
      if (!o(e))
          return !0;
      var t = f(this),
          a = t.closest("li"),
          r = a.find(".content").text(),
          n = parseInt(t.closest("[data-wbtbl-col-idx]").attr("data-wbtbl-col-idx")),
          i = t.closest(".dataTables_wrapper").find(".wb-tables").removeClass("wbtbl-silent").DataTable();
      -1 !== n && (i = i.column(n)), i.search("", !1, !1, !0).draw(), a.remove(), s(i, !1, n, r)
  }), f(u).on("refreshCtrl.wbtbl", "table", function(e) {
      !function(t, a, e, r) {
          e && r ? s(t, a, e, r) : t.columns().every(function(e) {
              r = t.column(e).search(), s(t, a && r, e, r)
          })
      }(f(e.currentTarget).DataTable(), void 0 === e.isSelected || e.isSelected)
  }), f(u).on("submit", "[data-wbtbl-post]", function(e) {
      var t = f(this);
      return c.call(this), t.relatives().DataTable().draw(), !!t.is("[action]")
  }), f(u).on("reset", "[data-wbtbl-post]", function(e) {
      var n = this,
          i = f(n).relatives().DataTable();
      i.search(""), i.columns().every(function() {
          this.search("")
      }), i.draw(), setTimeout(function() {
          var e,
              t,
              a = n.querySelectorAll("[data-wb5-default-checked]"),
              r = a.length;
          for (e = 0; e < r; e++)
              (t = a[e]).checked = "false" !== t.dataset.wb5DefaultChecked;
          c.call(n), i.draw()
      }, 1)
  }), f("[data-wb5-click]").on("click", function() {
      var e = f(this).data("wb5-click").split("@"),
          t = e[0],
          a = (e[1], e[2]);
      if ("postback" === t) {
          var r = f(e[1]);
          return f.ajax({
              type: r.attr("method"),
              url: r.attr("action"),
              data: r.serialize()
          }), !a.block
      }
  }), f("[data-wb5-randomize]").each(function() {
      var e,
          t = f(this),
          a = t.data("wb5-randomize").split("@"),
          r = a[0],
          n = a[1],
          i = 2 < a.length ? JSON.parse(a[2]) : {};
      return "self!" === n.substring(0, 5) && (n = n.substr(5), e = t), "shuffle" === r && f(n, e).shuffle(), "toggle" === r && f(n, e).rand(i.number).toggleClass(i.classes), !0
  }), f(u).on("wb-ready.wb-charts", "[data-wb-charts-interactive]", function() {
      var e = f(this),
          t = e.command(this.getAttribute("data-wb-charts-interactive")),
          i = l.getId().replace(/-/g, ""),
          o = f(t.selector).html(),
          s = t.options ? t.options : 1,
          a = e.prev();
      f("<div id='" + i + "' class='wbchrt-tpl'></div>").css({
          position: "absolute",
          display: "none"
      }).appendTo("body"), f("canvas:eq(1)", a).css("position", "relative"), a.on("plothover", function(e, t, a) {
          if (a) {
              var r = f("#" + i),
                  n = {
                      x: a.datapoint[0],
                      y: a.datapoint[1],
                      label: a.series.label,
                      formatted: {}
                  };
              r.html(d(o, n, s)), r.css({
                  top: a.pageY + 7,
                  left: a.pageX + 7
              }).show()
          } else
              f("#" + i).hide()
      })
  })
}(jQuery, document, wb), function(x, k, A) {
  "use strict";
  function j(e) {
      return e.normalize("NFD").replace(/[\u0300-\u036f]/g, "")
  }
  function r(e) {
      var t = e.target,
          a = k.getElementById(t.getAttribute("list"));
      Modernizr.load({
          test: Modernizr.stringnormalize,
          nope: ["site!deps/unorm" + A.getMode() + ".js"]
      }), x(a).trigger({
          type: "json-fetch.wb",
          fetch: {
              url: a.dataset.wbSuggest
          }
      })
  }
  function n(e) {
      var t = e.target,
          a = k.getElementById(t.getAttribute("list")),
          r = e.target.value,
          n = e.which;
      switch (C && clearTimeout(C), e.type) {
      case "change":
          C = setTimeout(S.bind(a, r), 250);
          break;
      case "keyup":
          e.ctrlKey || e.altKey || e.metaKey || (8 === n || 32 === n || 47 < n && n < 91 || 95 < n && n < 112 || 159 < n && n < 177 || 187 < n && n < 223) && (C = setTimeout(S.bind(a, r), 250))
      }
  }
  var C,
      i = A.doc,
      o = "wb-suggest",
      s = "[data-" + o + "]",
      E = 5,
      S = function(e, t, a) {
          var r,
              n,
              i,
              o,
              s,
              l,
              d,
              c,
              u,
              p = a || JSON.parse(this.dataset.wbSuggestions || []),
              f = this.dataset.wbFilterType || "any",
              h = p.length,
              b = [],
              g = this.childNodes,
              m = g.length - 1,
              v = x("[list=" + this.id + "]"),
              w = v.get(0);
          if (!p.length && E && (E -= 1, C && clearTimeout(C), C = setTimeout(S(e, t, a), 250)), t || (t = parseInt(this.dataset.wbLimit || h)), e) {
              switch (f) {
              case "startWith":
                  e = "^" + e;
                  break;
              case "word":
                  e = "^" + e + "|\\s" + e
              }
              r = new RegExp(e, "i")
          }
          if (!e || e.length < 2)
              (function() {
                  var e,
                      t,
                      a = this.children;
                  for (t = a.length - 1; 0 < t; t -= 1)
                      1 === (e = a[t]).nodeType && "TEMPLATE" !== e.nodeName && this.removeChild(e)
              }).call(this), g = [];
          else
              for (d = m; 0 !== d; d -= 1)
                  1 === (c = g[d]).nodeType && "OPTION" === c.nodeName && ((u = c.getAttribute("value")) && u.match(r) ? b.push(j(u)) : this.removeChild(c));
          var y = this.querySelector("template");
          for (y && !y.content && A.tmplPolyfill(y), n = 0; n < h && b.length < t; n += 1)
              i = p[n], o = j(i), -1 !== b.indexOf(o) || e && !i.match(r) || (b.push(o), y ? l = (s = y.content.cloneNode(!0)).querySelector("option") : (s = k.createDocumentFragment(), l = k.createElement("OPTION"), s.appendChild(l)), l.setAttribute("label", i), l.setAttribute("value", i), this.appendChild(s));
          v.trigger("wb-update.wb-datalist"), w.value = w.value
      };
  i.on("timerpoke.wb wb-init.wb-suggest json-fetched.wb", s, function(e) {
      var t = e.type,
          a = e.target;
      if (e.currentTarget === a)
          switch (t) {
          case "timerpoke":
          case "wb-init":
              !function(e) {
                  var t = A.init(e, o, s),
                      a = "[list=" + e.target.id + "]";
                  t && (Modernizr.addTest("stringnormalize", "normalize" in String), i.one("focus", a, r), (t.dataset.wbLimit || t.dataset.wbFilterType) && i.on("change keyup", a, n), A.ready(x(t), o))
              }(e);
              break;
          case "json-fetched":
              (function(e) {
                  this.dataset.wbSuggestions = JSON.stringify(e), delete this.dataset.wbSuggest, S.call(this, k.querySelector("[list=" + this.id + "]").value)
              }).call(a, e.fetch.response)
          }
      return !0
  }), A.add(s)
}(jQuery, document, wb), function(I, f, h, T) {
  "use strict";
  function d(e, t) {
      for (var a = h.getElementById(e.getAttribute("aria-controls")), r = I(e).parent(), n = I(e); !n.hasClass("wb5React");)
          n = n.parent();
      var i,
          o,
          s = C[n.get(0).id],
          l = a.getAttribute("data-wb5-template");
      if (l && (i = s.template(l) || h.getElementById(l) || s.tmplDefault(l)), !i || !l)
          throw "No template defined to show listbox options";
      s.template(l, i), R(i), o = i.content.cloneNode(!0), s.data.filter = e.value, q = [], N(o, s, l), o.querySelectorAll("[role=option]").length ? (a.innerHTML = "", a.appendChild(o), I(a).removeClass("hidden"), c = r.get(0)) : c && P()
  }
  function r(e) {
      if (l(e), document.activeElement !== e) {
          for (var t = I(e).parent(), a = I(e); !a.hasClass("wb5React");)
              a = a.parent();
          for (var r = C[a.get(0).id], n = e.value, i = {}, o = r.data.options, s = 0; s < o.length; s++)
              if (n === o[s].value) {
                  i = o[s];
                  break
              }
          t.trigger("wb.change", {
              value: e.value,
              item: i
          })
      }
  }
  var b,
      c,
      u,
      g = "wb-combobox",
      m = "." + g,
      e = T.doc,
      v = {
          template: '<div class="combobox-wrapper"><div role="combobox" aria-expanded="false" aria-haspopup="listbox" data-wb5-bind="aria-owns@popupId"><input autocomplete="off" data-rule-fromListbox="true" data-wb5-bind="id@fieldId, aria-controls@popupId, value@filter" aria-autocomplete="list" aria-activedescendant="" /></div><div data-wb5-bind="id@popupId" role="listbox" class="hidden"><template data-slot-elm="" data-wb5-template="sub-template-listbox"><ul class="list-unstyled mrgn-bttm-0">\x3c!-- <li class="brdr-bttm" role="option" data-wb5-for="option in wbLoad" data-wb5-if="!parent.filter.length || parent.config.compareLowerCase(option,parent.filter)" data-wb5-on="select@select(option); live@parent.nbdispItem(wb-nbNode)" >{{ option }}</li> --\x3e<li class="" role="option" data-wb5-for="option in options" data-wb5-if="!parent.filter.length || parent.config.compareLowerCase(option.value,parent.filter)" data-wb5-on="select@select(option.value); live@parent.nbdispItem(wb-nbNode)" >{{ option.textContent }}</li></ul></template></div></div>',
          i18n: {
              en: {
                  errValid: "You need to choose a valid options."
              },
              fr: {
                  errValid: "Veuillez choisir une option valide."
              }
          },
          compareLowerCase: function(e, t) {
              return -1 !== e.toLowerCase().indexOf(t.toLowerCase())
          },
          similarText: function(e, t, a) {
              function h(e, t) {
                  for (var a = [], r = 0; r <= e.length; r++) {
                      for (var n = r, i = 0; i <= t.length; i++)
                          if (0 === r)
                              a[i] = i;
                          else if (0 < i) {
                              var o = a[i - 1];
                              e.charAt(r - 1) !== t.charAt(i - 1) && (o = Math.min(Math.min(o, n), a[i]) + 1), a[i - 1] = n, n = o
                          }
                      0 < r && (a[t.length] = n)
                  }
                  return a[t.length]
              }
              var r = function(e, t) {
                  e = e.replace(/[\-\/]|_/g, " ").replace(/[^\w\s]|_/g, "").trim().toLowerCase(), t = t.replace(/[\-\/]|_/g, " ").replace(/[^\w\s]|_/g, "").trim().toLowerCase();
                  var a = e.split(" "),
                      r = t.split(" ");
                  if (e.length > t.length && (a = t.split(" "), r = e.split(" ")), !r.length || !a.length)
                      return 100;
                  for (var n = 0, i = 0, o = "", s = "", l = 0; l < a.length; l++) {
                      for (var d = 0, c = 0, u = !1, p = 0; p < r.length; p++)
                          if (s = a[l], 0 <= (o = r[p]).indexOf(s)) {
                              var f = o.length;
                              (!u || f < d) && (d = o.length, c = o.length), u = !0
                          } else
                              u || d < (f = o.length - h(s, o)) && (d = f, c = o.length);
                      n += d, i += c
                  }
                  return 0 === n ? 0 : n / i * 100
              }(e, t);
              return (a = parseInt(a)) <= r
          }
      },
      p = 9,
      w = 13,
      y = 27,
      x = 35,
      k = 36,
      A = 38,
      j = 40,
      C = {},
      E = h.createDocumentFragment(),
      q = [],
      N = function(t, a, e) {
          var r,
              n = t.childNodes,
              i = n.length,
              o = [];
          for (m = 0; m < i; m++) {
              if (3 === (r = n[m]).nodeType && -1 != r.textContent.indexOf("{{")) {
                  r.textContent = r.textContent.replace(/{{\s?([^}]*)\s?}}/g, function(e, t) {
                      return U(a.data, t.trim())
                  })
              }
              if ("TEMPLATE" !== r.nodeName) {
                  if (1 === r.nodeType)
                      if (r.hasAttribute("data-wb5-for")) {
                          var s = z(r, "data-wb5-for"),
                              l = B(s),
                              d = U(a.data, l.for);
                          if (!d)
                              throw "Iterator not found";
                          var c = d.length,
                              u = 0;
                          for (d.wbLen = parseInt(c), I.isArray(d) && (d.active = u), m = 0; m < c; m++) {
                              var p = r.cloneNode(!0),
                                  f = L(p),
                                  h = {
                                      "wb-idx": m,
                                      "wb-nbNode": u,
                                      parent: a.data
                                  };
                              h[l.alias] = d[m], h = F(h), e && (a.data[e] = h), f.if && !D(f.if, h.data, a.data) || (u += 1, N(p, h, e), t.appendChild(p))
                          }
                          d.wbActive = u, o.push(r)
                      } else
                          r.hasAttribute("data-wb5-if") || r.hasAttribute("data-wb5-else") || r.hasAttribute("data-wb5-ifelse"), N(r, a, e)
              } else {
                  R(r);
                  var b = z(r, "data-wb5-template");
                  b || (b = T.getId()), r.parentNode.hasAttribute("data-wb5-template") || r.parentNode.setAttribute("data-wb5-template", b), a.tmplDefault(b, r)
              }
          }
          for (i = o.length, m = 0; m !== i; m += 1)
              t.removeChild(o[m]);
          if (1 === t.nodeType && t.hasAttribute("data-wb5-bind"))
              for (var g = z(t, "data-wb5-bind").split(", "), m = 0; m < g.length; m++) {
                  var v = g[m].split("@");
                  t[v[0]] ? (t[v[0]] = U(a.data, v[1]), a.observe(v[1], function(e) {
                      return t[v[0]] = U(a.data, v[1]) || ""
                  })) : (t.setAttribute(v[0], U(a.data, v[1])), a.observe(v[1], function(e) {
                      return void 0 !== t[v[0]] ? t[v[0]] = U(a.data, v[1]) || "" : t.setAttribute(v[0], U(a.data, v[1])) || ""
                  }))
              }
          if (1 === t.nodeType && t.hasAttribute("data-wb5-text")) {
              var w = z(t, "data-wb5-text");
              t.textContent = U(a.data, w), a.observe(w, function(e) {
                  return t.textContent = U(a.data, w) || ""
              })
          }
          if (1 === t.nodeType && t.hasAttribute("data-wb5-on")) {
              var y = z(t, "data-wb5-on").split("; ");
              i = y.length;
              for (m = 0; m < i; m++) {
                  var x,
                      k,
                      A = y[m].split("@"),
                      j = A[0],
                      C = A[1],
                      E = C.indexOf("("),
                      S = C.lastIndexOf(")");
                  if (E && S && (x = C.substring(0, E).trim(), k = C.substring(E + 1, S).trim()), !x)
                      throw "Error, an event handler need to call a function";
                  k && (k = O(k, a.data)), "live" === j ? U(a.data, x).call(a.data, k) : q.push({
                      nd: t,
                      evt: j,
                      trigger: x,
                      attr: k
                  })
              }
          }
      },
      z = function(e, t) {
          var a = e.getAttribute(t);
          return e.removeAttribute(t), a
      },
      D = function(e, t, a) {
          return !!O(e, t, a)
      },
      O = function(e, n, i) {
          var o = /{{-\s?([^}]*)\s?-}}/g,
              s = [];
          return e = (e = (e = e.replace(/"([^"\\]*(\\.[^"\\]*)*)"|\'([^\'\\]*(\\.[^\'\\]*)*)\'/g, function(e, t) {
              var a = "{{-" + s.length + "-}}";
              return s.push(e), a
          })).replace(/[a-zA-Z]([^\s]+)/g, function(e, t) {
              var a,
                  r = e.trim();
              r = r.replace(o, function(e, t) {
                  return s[t]
              });
              try {
                  a = U(n, r)
              } catch (e) {
                  try {
                      a = U(i, r)
                  } catch (e) {
                      throw "Information in the DATA obj not found"
                  }
              }
              return "object" == typeof a && (a = JSON.stringify(a)), "string" == typeof a ? '"' + a + '"' : a
          })).replace(o, function(e, t) {
              return s[t]
          }), new Function("return " + e)()
      },
      L = function(e) {
          var t = {},
              a = z(e, "data-wb5-if");
          if (a)
              t.if = a, n(t, {
                  exp: a,
                  block: e
              });
          else {
              null != z(e, "data-wb5-else") && (t.else = !0);
              var r = z(e, "data-wb5-elseif");
              r && (t.elseif = r)
          }
          return t
      },
      n = function(e, t) {
          e.ifConditions || (e.ifConditions = []), e.ifConditions.push(t)
      },
      S = function(e, t) {
          var a,
              r,
              n = e.options,
              i = n.length;
          for (a = 0; a < i; a++)
              r = n[a], t.data.options.push({
                  value: r.value,
                  textContent: r.textContent
              });
          t.data.fieldId = e.id || T.getId(), t.data.fieldName = e.name, t.data.mustExist = !0
      },
      M = function(e, t) {
          var a,
              r = node.childNodes,
              n = r.length;
          for (a = 0; a < n; a++)
              r[a]
      },
      B = function(e) {
          var t = /,([^,\}\]]*)(?:,([^,\}\]]*))?$/,
              a = e.match(/([^]*?)\s+(?:in|of)\s+([^]*)/);
          if (a) {
              var r = {};
              r.for = a[2].trim();
              var n = a[1].trim().replace(/^\(|\)$/g, ""),
                  i = n.match(t);
              return i ? (r.alias = n.replace(t, ""), r.iterator1 = i[1].trim(), i[2] && (r.iterator2 = i[2].trim())) : r.alias = n, r
          }
      },
      U = function(e, t) {
          var a = (t = t.trim()).substring(0, 1),
              r = t.substring(-1);
          if ("'" === a || '"' === a || "'" === r || '"' === r)
              return t.substring(1, t.length - 1);
          var n = t.indexOf("("),
              i = t.lastIndexOf(")"),
              o = [];
          if (-1 !== n && -1 !== i && n + 1 !== i) {
              var s,
                  l,
                  d,
                  c = t.substring(0, n);
              for (d = (o = t.substring(n + 1, i).split(",")).length, s = 0; s < d; s += 1) {
                  l = o[s];
                  var u = U(e, l);
                  o[s] = u
              }
              t = c + "()"
          }
          var p,
              f,
              h,
              b = t.split("."),
              g = b.length;
          for (p = 0; p < g; p += 1) {
              if (f = b[p], !e)
                  return;
              e = -1 !== f.lastIndexOf("()") ? (h = f.substring(0, f.length - 2), "string" == typeof e ? String.prototype[h].apply(e, o) : e[h].apply(e, o)) : e[f]
          }
          return e
      },
      R = function(e) {
          if (!e.content) {
              var t,
                  a,
                  r = e;
              for (t = r.childNodes, a = h.createDocumentFragment(); t[0];)
                  a.appendChild(t[0]);
              r.content = a
          }
      },
      P = function() {
          if (c) {
              var e = c.getAttribute("aria-owns");
              I("#" + e).addClass("hidden"), c = null
          }
      },
      l = function(e) {
          var t = e.form && e.form.parentNode.classList.contains("wb-frmvld");
          if (null === e.getAttribute("required") && "" === e.value || null === e.getAttribute("data-rule-mustExist"))
              return e.setCustomValidity(""), t && I(e).valid(), !0;
          for (var a = I(e); !a.hasClass("wb5React");)
              a = a.parent();
          var r,
              n,
              i = C[a.get(0).id],
              o = e.getAttribute("aria-controls"),
              s = (h.getElementById(o), i.data.options),
              l = e.value,
              d = s.length;
          for (r = 0; r < d; r += 1)
              if (l === s[r].value) {
                  n = !0;
                  break
              }
          return n ? (e.setCustomValidity(""), t && I(e).valid(), !0) : (e.setCustomValidity(b.errValid), t && I(e).valid(), !1)
      };
  function F(e) {
      var a = {},
          r = {},
          n = {};
      return function(e) {
          for (var t in e)
              e.hasOwnProperty(t) && o(e, t)
      }(e), {
          data: e,
          observe: t,
          notify: i,
          template: function(e, t) {
              {
                  if (!t)
                      return r[e] || !1;
                  r[e] = t
              }
          },
          tmplDefault: function(e, t) {
              {
                  if (!t)
                      return n[e] || !1;
                  n[e] = t
              }
          },
          debug_signals: a
      };
      function t(e, t) {
          a[e] || (a[e] = []), a[e].push(t)
      }
      function i(e) {
          !a[e] || a[e].length < 1 || a[e].forEach(function(e) {
              return e()
          })
      }
      function o(e, t, a) {
          var r = e[t];
          if (Array.isArray(r))
              return r.wbLen = parseInt(r.length), r.wbActive = 0, o(r, "wbLen", t), void o(r, "wbActive", t);
          Object.defineProperty(e, t, {
              get: function() {
                  return r
              },
              set: function(e) {
                  r = e, i(a ? a + "." + t : t)
              }
          })
      }
  }
  e.on("wb-ready.wb", function(e) {
      I.validator && I.validator.addMethod("fromListbox", function(e, t) {
          return t.checkValidity()
      }, "You need to choose a valid options")
  }), e.on("json-fetched.wb", "[role=combobox]", function(e) {
      for (var t = e.target, a = e.fetch.response, r = I(t); !r.hasClass("wb5React");)
          r = r.parent();
      C[r.get(0).id].data.wbLoad = a
  }), e.on("click vclick touchstart focusin", "body", function(e) {
      c && !c.parentElement.contains(e.target) && setTimeout(function() {
          P()
      }, 1)
  }), e.on("focus", "[role=combobox] input", function(e, t) {
      c || setTimeout(function() {
          d(e.target)
      }, 1)
  }), e.on("blur", "[role=combobox] input", function(e, t) {
      r(e.target)
  }), e.on("keyup", "[role=combobox] input", function(e) {
      var t = e.which || e.keyCode,
          a = e.target.classList.contains("error");
      switch (t) {
      case A:
      case j:
      case y:
      case w:
      case k:
      case x:
          e.preventDefault();
      case p:
          return void (a && setTimeout(function() {
              r(e.target)
          }, 100));
      default:
          setTimeout(function() {
              d(e.target), a && r(e.target)
          }, 100)
      }
  }), e.on("keydown", "[role=combobox] input", function(e) {
      var t = e.which || e.keyCode,
          a = e.target;
      if (t !== y) {
          var r;
          c || d(a);
          var n = a.getAttribute("aria-activedescendant"),
              i = n ? h.getElementById(n) : null,
              o = h.getElementById(a.getAttribute("aria-controls")).querySelectorAll("[role=option]"),
              s = o.length,
              l = -1;
          if (i) {
              for (l = 0; l < s && o[l].id !== i.id; l++)
                  ;
              s <= l && (l = -1)
          }
          switch (t) {
          case A:
              -1 === l ? l = s - 1 : 0 !== l ? l-- : l = s - 1;
              break;
          case j:
              -1 === l ? l = 0 : l < s && l++;
              break;
          case k:
              l = 0;
              break;
          case x:
              l = s - 1;
              break;
          case w:
              return I(o[l]).trigger("wb.select"), P(), void e.preventDefault();
          case p:
              return u && I(o[l]).trigger("wb.select"), void P();
          default:
              return
          }
          e.preventDefault(), r = o[l], i && i.setAttribute("aria-selected", "false"), r ? (r.id || (r.id = T.getId()), a.setAttribute("aria-activedescendant", r.id), r.setAttribute("aria-selected", "true"), u = !0) : a.setAttribute("aria-activedescendant", "")
      } else
          P()
  }), e.on("mouseover", "[role=listbox] [role=option]", function(e, t) {
      var a = c.querySelector("input"),
          r = e.target,
          n = a.getAttribute("aria-activedescendant"),
          i = n ? h.getElementById(n) : null;
      i && i.setAttribute("aria-selected", "false"), r.id || (r.id = T.getId()), i && i.id !== r.id && (u = !1), r.setAttribute("aria-selected", "true"), a.setAttribute("aria-activedescendant", r.id)
  }), e.on("click", "[role=listbox] [role=option]", function(e, t) {
      var a = I(c.querySelector("input"));
      I(e.target).trigger("mouseover").trigger("wb.select"), a.trigger("focus"), P()
  }), e.on("wb.select", "[role=listbox] [role=option]", function(e, t) {
      for (var a = e.target, r = h.querySelector("[aria-activedescendant=" + a.id + "]"), n = I(r); !n.hasClass("wb5React");)
          n = n.parent();
      var i,
          o,
          s = C[n.get(0).id];
      for (i = 0; i < q.length; i++)
          if ((o = q[i]).nd.isEqualNode(a)) {
              s.data[o.trigger].call(s.data, o.attr);
              break
          }
  }), e.on("timerpoke.wb wb-init.wb-combobox", m, function(e, t) {
      var a,
          r,
          n = T.init(e, g, m);
      if (n) {
          a = I(n), r = I.extend(!0, {}, v, f[g], T.getData(a, g)), b || (b = r.i18n[T.lang]);
          var i = F(t || function(e) {
              return {
                  popupId: T.getId(),
                  fieldId: !1,
                  fieldName: "",
                  mustExist: !1,
                  filter: "",
                  cntdisplayeditem: 0,
                  options: [],
                  config: e,
                  i18n: {},
                  horay: "testMe",
                  select: function(e) {
                      this.filter = e
                  },
                  nbdispItem: function(e) {
                      this.cntdisplayeditem = e
                  }
              }
          }(r));
          n.id || (n.id = T.getId()), r.parserUI && "function" == typeof r.parserUI ? r.parserUI(n, i) : r.parserUI && I.isArray(r.parserUI) && r.parserUI[n.id] ? r.parserUI[n.id].call(this, n, i) : function(e, t) {
              "SELECT" === e.nodeName ? S(e, t) : "INPUT" === e.nodeName && M(e, t)
          }(n, i), i.data.fieldId || (i.data.fieldId = T.getId());
          var o,
              s = function(e, t) {
                  var a,
                      r,
                      n = t.templateID;
                  if (n && (a = h.getElementById(n)), a)
                      R(a), r = a.content.cloneNode(!0);
                  else {
                      var i = h.createElement("div");
                      i.innerHTML = t.template, (r = h.createDocumentFragment()).appendChild(i)
                  }
                  return q = [], N(r, e), r
              }(i, r),
              l = s.childNodes,
              d = l.length;
          for (p = 0; p < d; p++)
              if (1 === (o = l[p]).nodeType) {
                  var c = o.id;
                  c || (c = T.getId(), o.id = c), C[c] = i, o.classList.add("wb5React")
              }
          var u = s.querySelector("[role=combobox]");
          i.data.mustExist && s.querySelector("[role=combobox] input").setAttribute("data-rule-mustExist", "true");
          n.parentNode.insertBefore(s, n);
          r.hideSourceUI ? a.addClass("hidden") : (n.id = T.getId(), E.appendChild(n));
          for (var p = 0; p < q.length; p++)
              q[p];
          a = I(s), n.dataset.wbLoad && I(u).trigger({
              type: "json-fetch.wb",
              fetch: {
                  url: n.dataset.wbLoad
              }
          }), "function" != typeof E.getElementById && (E.getElementById = function(e) {
              var t,
                  a,
                  r = this.childNodes,
                  n = r.length;
              for (t = 0; t < n; t += 1)
                  if ((a = r[t]).id === e)
                      return a;
              return !1
          }), Modernizr.addTest("stringnormalize", "normalize" in String), Modernizr.load({
              test: Modernizr.stringnormalize,
              nope: ["site!deps/unorm" + T.getMode() + ".js"]
          }), T.ready(a, g)
      }
  }), T.add(m)
}(jQuery, window, document, wb), function(c, a, e, u) {
  "use strict";
  function r(e, t) {
      e.id || (e.id = u.getId());
      for (var a = 0; a < i.items.length; a++) {
          var r = i.items[a],
              n = c.extend({}, r, {
                  value: r.label,
                  textContent: r.label
              });
          n.source || (n.source = e.id), t.data.options.push(n)
      }
  }
  var t = u.doc,
      i = {};
  c.expr[":"].checked;
  t.on("combobox.createctrl.wb-fieldflow", ".wb-fieldflow", function(e, t) {
      i = t, a["wb-combobox"] || (a["wb-combobox"] = {}), a["wb-combobox"].parserUI = [], a["wb-combobox"].parserUI[e.target.id] = r, a["wb-combobox"].hideSourceUI = !0, e.target.classList.add("wb-combobox"), c(e.target).trigger("wb-init.wb-combobox"), c(e.target).data().wbFieldflowRegister = [c(e.target).before().get(0).id], c(e.target).attr("data-wb-fieldflow-origin", c(e.target).before().get(0).id)
  }), t.on("wb.change", "[role=combobox]:not(.wb-fieldflow-init)", function(e, t) {
      var a = e.currentTarget,
          r = (c(a), t.item);
      a.id || (a.id = u.getId());
      var n,
          i = c("#" + r.bind).parentsUntil(".wb-fieldflow").parent();
      if (i.length) {
          n = i.get(0).id, r.source || n;
          var o = c("#" + r.bind).data().wbFieldflow;
          c.isArray(o) || (o = [o]);
          for (var s = 0; s < o.length; s++) {
              var l = o[s],
                  d = l.action + ".action.wb-fieldflow";
              l.provEvt = "#" + n, c("#" + n).trigger(d, l)
          }
      }
  })
}(jQuery, window, document, wb), function(f, e, i, h) {
  "use strict";
  var b,
      g,
      m,
      v,
      w,
      y = "wb-steps",
      x = "." + y,
      t = h.doc,
      k = function(e, t, a, r) {
          var n = i.createElement(e);
          return n.className = ("prev" === t ? "btn btn-md btn-default" : "btn btn-md btn-primary") + " " + a, n.href = "#", n.setAttribute("aria-labelby", r), n.setAttribute("rel", t), n.setAttribute("role", "button"), n.innerHTML = r, n
      },
      A = function(e) {
          e.addEventListener("click", function(e) {
              e.preventDefault();
              var t = !!this.className && this.className,
                  a = t && -1 < t.indexOf("btn-primary"),
                  r = !0;
              a && jQuery.validator && "undefined" !== jQuery.validator && (r = f("#" + this.parentElement.parentElement.parentElement.id).valid()), r ? (n(this.parentElement, a), a && this.parentElement.previousElementSibling.classList.remove("wb-steps-error")) : a && !r && this.parentElement.previousElementSibling.classList.add("wb-steps-error")
          })
      },
      n = function(e, t) {
          var a,
              r;
          e && (e.classList.add("hidden"), (r = !!e.previousElementSibling && e.previousElementSibling) && r.classList.remove("wb-steps-active"), (a = t ? e.parentElement.nextElementSibling : e.parentElement.previousElementSibling) && (r = a.getElementsByTagName("LEGEND")[0], e = a.getElementsByTagName("DIV")[0], r && r.classList.add("wb-steps-active"), e && e.classList.remove("hidden")))
      };
  t.on("timerpoke.wb wb-init.wb-steps", x, function(e) {
      var t = h.init(e, y, x);
      if (t) {
          t.id || (t.id = h.getId()), g || (b = h.i18n, g = {
              prv: b("prv"),
              nxt: b("nxt")
          });
          var a,
              r = t.getElementsByTagName("FORM")[0],
              n = r ? f(r).children("fieldset") : 0;
          m && v && w || (m = k("A", "prev", "mrgn-rght-sm mrgn-bttm-md", g.prv), v = k("A", "next", "mrgn-bttm-md", g.nxt), (w = r.querySelector("input[type=submit], button[type=submit]")).classList.add("mrgn-bttm-md"));
          for (var i = 0, o = n.length; i < o; i++) {
              var s,
                  l = n[i],
                  d = 0 === i,
                  c = i === o - 1,
                  u = l.firstElementChild,
                  p = !(!u || "LEGEND" !== u.tagName) && u.nextElementSibling;
              if (p && "DIV" === p.tagName)
                  a = !0, d || (s = m.cloneNode(!0), A(s), p.appendChild(s)), c ? p.appendChild(w) : (s = v.cloneNode(!0), A(s), p.appendChild(s)), l.classList.add("wb-tggle-fildst"), p.classList.add("hidden"), d && (u.classList.add("wb-steps-active"), p.classList.remove("hidden"))
          }
          r && a && f(r).children("input").hide()
      }
  }), h.add(x)
}(jQuery, window, document, wb), function(u, n, o) {
  "use strict";
  var p,
      f,
      h,
      b,
      g,
      m,
      c,
      v,
      i,
      w = "wb-chtwzrd",
      y = "." + w,
      s = w + "-replace",
      x = o.doc,
      k = {},
      A = {},
      j = {
          en: {
              "chtwzrd-send": "Send<span class='wb-inv'> reply and continue</span>",
              "chtwzrd-toggle": "Switch to wizard",
              "chtwzrd-notification": "Close chat notification",
              "chtwzrd-open": "Open chat wizard",
              "chtwzrd-minimize": "Minimize chat wizard",
              "chtwzrd-history": "Conversation history",
              "chtwzrd-reply": "Reply",
              "chtwzrd-controls": "Controls",
              "chtwzrd-toggle-basic": "Switch to basic form",
              "chtwzrd-waiting": "Waiting for message",
              "chtwzrd-answer": "You have answered:"
          },
          fr: {
              "chtwzrd-send": "Envoyer<span class='wb-inv'> la réponse et continuer</span>",
              "chtwzrd-toggle": "Basculer vers l&apos;assistant",
              "chtwzrd-notification": "Fermer la notification de discussion",
              "chtwzrd-open": "Ouvrir l&apos;assistant de discussion",
              "chtwzrd-minimize": "Réduire l&apos;assistant de discussion",
              "chtwzrd-history": "Historique de discussion",
              "chtwzrd-reply": "Répondre",
              "chtwzrd-controls": "Contrôles",
              "chtwzrd-toggle-basic": "Basculer vers le formulaire",
              "chtwzrd-waiting": "En attente d&apos;un message",
              "chtwzrd-answer": "Vous avez répondu&nbsp;:"
          }
      },
      r = function(t) {
          if (t.data(w + "-src"), t.data(w + "-src")) {
              var e = t.data(w + "-src");
              u.getJSON(e, function(e) {
                  d(t, k = e), a(t)
              })
          } else
              k = l(t), a(t)
      },
      a = function(e) {
          e.removeClass("hidden wb-inv").addClass(w + "-basic"), p = !(A = {
              shortDelay: 500,
              mediumDelay: 750,
              longDelay: 1250
          }), b = k.header.first, g = k.header.instructions ? k.header.instructions : "", h = k.header.defaultDestination, m = k.questions[b], f = k.header.formType ? k.header.formType : "dynamic", j = {
              send: (j = j[u("html").attr("lang") || "en"])["chtwzrd-send"],
              toggle: j["chtwzrd-toggle"],
              notification: j["chtwzrd-notification"],
              trigger: j["chtwzrd-open"],
              minimize: j["chtwzrd-minimize"],
              conversation: j["chtwzrd-history"],
              reply: j["chtwzrd-reply"],
              controls: j["chtwzrd-controls"],
              toggleBasic: j["chtwzrd-toggle-basic"],
              waiting: j["chtwzrd-waiting"],
              answer: j["chtwzrd-answer"]
          }, S(e, k.header.title);
          var t,
              a = u(y + "-basic"),
              r = u(y + "-bubble-wrap"),
              n = u(y + "-container"),
              i = u(".body", n),
              o = u(".history", n),
              s = u(".minimize", n),
              l = u(".basic-link", n),
              d = s,
              c = l;
          C(a), E(r), l.on("click", function(e) {
              e.preventDefault();
              var t = u("legend:first", a);
              t.attr("tabindex", "0"), o.attr("aria-live", ""), I(a, "form"), n.stop().hide(), a.stop().show(function() {
                  t.focus(), t.removeAttr("tabindex")
              }), u("body").removeClass(w + "-noscroll")
          }), u(y + "-link").on("click", function(e) {
              e.preventDefault(), a.stop().hide(), t = u(":focus"), u(this).hasClass(w + "-bubble") || I(n, "wizard"), u(".bubble", r).removeClass("trans-pulse"), u("p", r).hide().removeClass("trans-left"), n.stop().show(), r.stop().hide(), u("body").addClass(w + "-noscroll"), o.length && u(".conversation", n).scrollTop(o[0].scrollHeight), p || T(i)
          }), n.on("keydown", function(e) {
              9 === e.keyCode && (e.shiftKey ? d.is(":focus") && (e.preventDefault(), c.focus()) : c.is(":focus") && (e.preventDefault(), d.focus())), 27 === e.keyCode && s.click()
          }), x.on("click", y + "-container .btn-send", function(e) {
              if ("submit" != u(this).attr("type")) {
                  e.preventDefault();
                  var t = u("input:checked", i);
                  t.length || (t = u("input:first", i)).attr("checked", !0), q(i, z(t), !1)
              }
          }), s.on("click", function(e) {
              e.preventDefault(), n.stop().hide(), r.stop().show(), u("body").removeClass(w + "-noscroll"), t.focus()
          })
      },
      C = function(e) {
          var r = u("form", e),
              t = u("fieldset", e),
              a = t.first();
          "dynamic" == f && (a.addClass(w + "-first-q"), t.not(y + "-first-q").hide()), e.hide(), u("input", r).prop("checked", !1), r.append('<button class="btn btn-sm btn-link ' + w + '-link mrgn-rght-sm">' + j.toggle + "</button>"), u("input", r).on("change", function() {
              var e = z(u(this)),
                  t = u("#" + e.qNext, r);
              if ("dynamic" == f) {
                  var a = u(this).closest("fieldset");
                  !t.is(":hidden") && a.next().attr("id") == t.attr("id") && "none" != e.qNext || a.nextAll("fieldset").hide().find("input").prop("checked", !1), "none" != e.qNext && u("#" + e.qNext).show(), "" != e.url && r.attr("action", e.url)
              }
          })
      },
      E = function(t) {
          var a = u("#wb-info");
          if (t.fadeIn("slow"), a.addClass(w + "-mrgn"), a.length) {
              var e = function(e) {
                  u(n).scrollTop() >= u(document).outerHeight() - u(n).outerHeight() - a.outerHeight() ? e.css({
                      bottom: a.outerHeight() - (u(document).outerHeight() - u(n).outerHeight() - u(n).scrollTop()) + 30
                  }) : e.css({
                      bottom: 30
                  })
              };
              e(t), u(n).on("resize scroll", function() {
                  e(t)
              })
          }
          u(".notif", t).on("click", function() {
              u(y + "-link", t).click()
          }), u(".notif-close", t).on("click", function(e) {
              e.preventDefault(), u(this).parent().hide(), t.focus()
          })
      },
      l = function(e) {
          var t = u("form", e),
              a = u("h2", e).first(),
              r = u("p:not(" + y + "-greetings):not(" + y + "-farewell)", t).first(),
              n = "btn-former-send",
              i = {};
          i.header = (e.data(w), e.data(w) ? e.data(w) : {}), i.header.defaultDestination = t.attr("action"), i.header.name = t.attr("name"), i.header.method = t.attr("method"), i.header.form = {}, i.header.form.title = a.html(), i.header.title = N(a, i.header.form.title), i.header.greetings = u("p" + y + "-greetings", t).html(), i.header.farewell = u("p" + y + "-farewell", t).html(), i.header.form.sendBtn = u("input[type=submit]", t).length ? u("input[type=submit]", t).addClass(n).val() : u("button[type=submit]", t).addClass(n).html(), i.header.sendBtn = N(u("." + n, t), i.header.form.sendBtn), r.length && (i.header.form.instructions = r.html(), i.header.instructions = N(r, i.header.form.instructions));
          var o = u("fieldset", e);
          return i.questions = {}, void 0 !== i.header.first && i.header.first || (i.header.first = o.first().attr("id")), o.each(function() {
              var e = u("legend", u(this)),
                  t = u("label", u(this)),
                  a = u(this).attr("id"),
                  r = u("input[type=radio]", u(this)).length ? "radio" : "checkbox",
                  o = [],
                  s = "";
              t.each(function(e) {
                  var t = u("input", u(this)),
                      a = {},
                      r = t.attr("name"),
                      n = t.data(w + "-url"),
                      i = t.siblings("span:not(.no-" + w + ")").html();
                  e || (s = r), a.content = i, a.value = t.val(), a.next = t.data(w + "-next"), n && (a.url = n), o.push(a)
              }), i.questions[a] = {}, i.questions[a].name = s, i.questions[a].input = r, i.questions[a].formLabel = e.html(), i.questions[a].label = N(e, i.questions[a].formLabel), i.questions[a].choices = o
          }), i
      },
      S = function(e, t) {
          e.after('<div class="' + w + '-bubble-wrap"><p class="trans-left"><span class="notif">' + t + '</span> <a href="#" class="notif-close" title="' + j.notification + '" aria-label="' + j.notification + '" role="button">×</a></p><a href="#' + w + '-container" aria-controls="' + w + '-container" class="' + w + '-link bubble trans-pulse" role="button">' + j.trigger + "</a></div>"), e.next(y + "-bubble-wrap").after('<aside id="' + w + '-container" class="modal-content overlay-def ' + w + '-container"></aside>');
          var a = u(y + "-container");
          a.append('<header class="modal-header header"><h2 class="modal-title title">' + t + '</h2><button type="button" class="minimize" title="' + j.minimize + '"><span class="glyphicon glyphicon-chevron-down"></span></button></header>'), a.append('<form class="modal-body body" method="GET"></form>');
          var r = u(".body", a);
          r.append('<div class="conversation"><section class="history" aria-live="assertive"><h3 class="wb-inv">' + j.conversation + '</h3></section><section class="reply"><h3 class="wb-inv">' + j.reply + '</h3><div class="inputs-zone"></div></section><div class="form-params"></div></div>'), r.append('<section class="controls"><h3 class="wb-inv">' + j.controls + '</h3><div class="row"><div class="col-xs-12"><button class="btn btn-primary btn-block btn-send" type="button">' + j.send + '</button></div></div><div class="row"><div class="col-xs-12 text-center mrgn-tp-sm"><a href="#' + w + '-basic" class="btn btn-sm btn-link basic-link" role="button">' + j.toggleBasic + "</a></div></div></section>"), r.attr("name", k.header.name + "-chat"), r.attr("method", k.header.method), i = u(".btn-send ", r).html()
      },
      d = function(e, t) {
          e.html("");
          var a = "<h2>" + t.header.title + "</h2>",
              r = "<p>" + t.header.instructions + "</p>",
              n = ">" + t.header.sendBtn + "</button>";
          t.header.form.title, a = "<h2 data-" + s + '="' + t.header.title + '">' + t.header.form.title + "</h2>", e.append(a + '<form class="mrgn-bttm-xl" action="' + t.header.defaultDestination + '" name="' + t.header.name + '" method="' + (t.header.method ? t.header.method : "GET") + '"></form>');
          var i = u("form", e);
          t.header.form.instructions, r = "<p data-" + s + '="' + t.header.instructions + '">' + t.header.form.instructions + "</p>", i.append('<p class="wb-chtwzrd-greetings wb-inv">' + t.header.greetings + "</p>" + r), u.each(t.questions, function(e, a) {
              var r = o.getId(),
                  t = "<legend>" + a.label + "</legend>";
              a.formLabel, a.formLabel && (t = "<legend data-" + s + '="' + a.label + '">' + a.formLabel + "</legend>"), i.append('<fieldset id="' + e + '" class="' + r + '">' + t + '<ul class="list-unstyled mrgn-tp-md"></ul></fieldset>');
              var n = u("." + r, i);
              u.each(a.choices, function(e, t) {
                  r = o.getId(), u("ul", n).append('<li><label><input type="' + a.input + '" value="' + t.value + '" id ="' + r + '" name="' + a.name + '" data-value="' + t.content + '" /> <span>' + t.content + "</span>"), u("#" + r, n).attr("data-" + w + "-next", t.next), t.url, t.url && u("#" + r, n).attr("data-" + w + "-url", t.url)
              })
          }), t.header.form.sendBtn, n = " data-" + s + '="' + t.header.sendBtn + '">' + t.header.form.sendBtn + "</button>", i.append('<p class="wb-chtwzrd-farewell wb-inv">' + t.header.farewell + '</p><br/><button type="submit" class="btn btn-sm btn-primary"' + n), void 0 !== k.header.first && k.header.first || (k.header.first = u("fieldset", i).first().attr("id"))
      },
      I = function(e, t) {
          if ("wizard" == t) {
              var a = u(".conversation", e);
              n.clearTimeout(c), n.clearTimeout(v), p = !1, h = k.header.defaultDestination, b = k.header.first, g = k.header.instructions ? k.header.instructions : "", m = k.questions[b], u(".history, .form-params", a).html(""), u(".btn-send", e).attr("type", "button").html(i), u(".history", a).attr("aria-live", "assertive"), T(u(".body", e))
          } else {
              var r = u("fieldset", e);
              "dynamic" == f && (r.not(":first").hide(), u("input", r).prop("checked", !1))
          }
      },
      T = function(n) {
          var i = u(".history", n),
              o = u(".inputs-zone", n),
              s = u(".conversation", n),
              l = u(".btn-send", n),
              e = "" != b || "" != g || "last" == m ? "p" : "h4";
          p = !0, l.prop("disabled", !0), o.html(""), i.append('<div class="row mrgn-bttm-md"><div class="col-xs-9"><' + e + ' class="mrgn-tp-0 mrgn-bttm-0"><span class="avatar"></span><span class="question"></span></' + e + "></div></div>");
          var d = u(".question:last", i);
          t(d), c = setTimeout(function() {
              "" != b ? (d.html(k.header.greetings), b = "", T(n)) : "" != g ? (d.html(g), g = "", T(n)) : "last" == m ? (d.html(k.header.farewell), l.attr("type", "submit").prop("disabled", !1).html(k.header.sendBtn + '&nbsp;<span class="glyphicon glyphicon-chevron-right small"></span>'), n.attr("action", h)) : (d.html(m.label), m.input = "radio", v = setTimeout(function() {
                  o.append('<fieldset><legend class="wb-inv">' + m.label + '</legend><div class="row"><div class="col-xs-12"><ul class="' + ("inline" == k.header.displayForm ? "list-inline" : "list-unstyled") + ' mrgn-tp-sm choices"></ul></div></div></fieldset>');
                  for (var e = 0; e < m.choices.length; e++) {
                      var t = m.choices[e];
                      u(".choices", o).append('<li><label><input type="' + m.input + '" value="' + t.value + '" name="' + m.name + '" data-' + w + '-next="' + t.next + '"' + (void 0 === t.url ? "" : " data-" + w + '-url="' + t.url + '"') + (e ? "" : "checked ") + "/> <span>" + t.content + "</span></label></li>")
                  }
                  l.prop("disabled", !1);
                  var a = s[0].scrollHeight,
                      r = u(".reply", n);
                  r.length && r.outerHeight() + d.outerHeight() > s.innerHeight() && (a = i[0].scrollHeight - d.outerHeight() - 42), s.scrollTop(a)
              }, A.mediumDelay)), s.scrollTop(s[0].scrollHeight)
          }, A.longDelay)
      },
      q = function(e, t) {
          var a = o.getId(),
              r = u(".history", e);
          r.append('<div class="row mrgn-bttm-md"><div class="col-xs-9 col-xs-offset-3"><div class="message text-right pull-right" id="' + a + '"><p class="mrgn-bttm-0"><span class="wb-inv">' + j.answer + " </span>" + t.value + "</p></div></div></div>"), u(".form-params", e).append('<input type="hidden" name="' + t.name + '" value="' + t.val + '" data-value="' + t.value + '" />'), p = !1, "" != t.url && (h = t.url);
          var n = t.qNext,
              i = u("#" + a, r);
          m = "none" == n ? "last" : k.questions[n], u(".btn-send", e).prop("disabled", !0), i.attr("tabindex", "0"), c = setTimeout(function() {
              u(".inputs-zone", e).remove("fieldset"), i.focus(), i.removeAttr("tabindex"), T(e)
          }, A.shortDelay)
      },
      t = function(e) {
          e.html('<span class="loader-typing" aria-label="' + j.waiting + '"><span class="loader-dot dot1"></span><span class="loader-dot dot2"></span><span class="loader-dot dot3"></span></span>')
      },
      N = function(e, t) {
          var a = e.data(s);
          return a || t
      },
      z = function(e) {
          var t = e.data(w + "-next"),
              a = e.data(w + "-url");
          return {
              qNext: t,
              name: e.attr("name"),
              val: e.val(),
              url: a || "",
              value: e.next().html()
          }
      };
  x.on("timerpoke.wb wb-init.wb-chtwzrd", y, function(e) {
      var t,
          a = o.init(e, w, y);
      a && (t = u(a), r(t), o.ready(t, w))
  }), o.add(y)
}(jQuery, window, wb), $(document).on("do.wb-actionmng", "table[data-wb-urlmapping][data-wb5-bind]", function(e) {
  var t = $(e.currentTarget);
  t.one("draw.dt", function() {
      t.trigger("refreshCtrl.wbtbl")
  })
});

